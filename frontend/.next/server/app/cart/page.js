(()=>{var e={};e.id=5,e.ids=[5],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},18773:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(65239),a=r(48088),i=r(88170),o=r.n(i),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d={children:["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70905)),"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\cart\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\cart\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37307:(e,t,r)=>{"use strict";r.d(t,{Nc:()=>o});var s=r(26787),a=r(59350);let i=(0,s.v)()((0,a.Zr)((e,t)=>({cart:null,isLoading:!1,error:null,setCart:t=>{e({cart:t,error:null})},addItem:r=>{let s,a=t().cart;if(!a)return void e({cart:{items:[r],totalItems:r.quantity,totalAmount:r.price*r.quantity,lastModified:new Date().toISOString()}});let i=a.items.findIndex(e=>e.product._id===r.product._id);i>-1?(s=[...a.items])[i]={...s[i],quantity:s[i].quantity+r.quantity,price:r.price}:s=[...a.items,r];let o={...a,items:s,lastModified:new Date().toISOString()};o.totalItems=s.reduce((e,t)=>e+t.quantity,0),o.totalAmount=s.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:o})},updateItemQuantity:(r,s)=>{let a,i=t().cart;if(!i)return;a=s<=0?i.items.filter(e=>e.product._id!==r):i.items.map(e=>e.product._id===r?{...e,quantity:s}:e);let o={...i,items:a,lastModified:new Date().toISOString()};o.totalItems=a.reduce((e,t)=>e+t.quantity,0),o.totalAmount=a.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:o})},removeItem:r=>{let s=t().cart;if(!s)return;let a=s.items.filter(e=>e.product._id!==r),i={...s,items:a,lastModified:new Date().toISOString()};i.totalItems=a.reduce((e,t)=>e+t.quantity,0),i.totalAmount=a.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:i})},clearCart:()=>{e({cart:{items:[],totalItems:0,totalAmount:0,lastModified:new Date().toISOString()}})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},clearError:()=>{e({error:null})},calculateTotals:()=>{let r=t().cart;if(!r)return;let s=r.items.reduce((e,t)=>e+t.quantity,0),a=r.items.reduce((e,t)=>e+t.price*t.quantity,0);e({cart:{...r,totalItems:s,totalAmount:a,lastModified:new Date().toISOString()}})}}),{name:"cart-storage",partialize:e=>({cart:e.cart})})),o=()=>{let e=i();return{setCart:e.setCart,addItem:e.addItem,updateItemQuantity:e.updateItemQuantity,removeItem:e.removeItem,clearCart:e.clearCart,setLoading:e.setLoading,setError:e.setError,clearError:e.clearError,calculateTotals:e.calculateTotals}}},49483:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(60687),a=r(30474),i=r(85814),o=r.n(i),n=r(16189),l=r(21891),d=r(80068),c=r(96804),u=r(75452);function m(){let e=(0,n.useRouter)(),{data:t,isLoading:r}=(0,c._)(),i=(0,u.uM)(),m=(0,u.IM)(),p=(0,u.lj)(),x=t?.data,h=(e,t)=>{t<1||i.mutate({productId:e,quantity:t})},g=e=>{m.mutate(e)};return r?(0,s.jsx)(d.A,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/4 mb-8"}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"bg-white rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"h-20 w-20 bg-gray-300 rounded"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/4"})]})]})},t))})]})})]})}):(0,s.jsx)(d.A,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.A,{}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Shopping Cart"}),x&&x.items.length>0&&(0,s.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to clear your cart?")&&p.mutate()},className:"text-red-600 hover:text-red-800 font-medium",children:"Clear Cart"})]}),x&&0!==x.items.length?(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("h2",{className:"text-lg font-semibold",children:["Cart Items (",x.totalItems,")"]})}),(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:x.items.map(e=>(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"relative h-20 w-20",children:e.product.images[0]?(0,s.jsx)(a.default,{src:e.product.images[0].url,alt:e.product.name,fill:!0,className:"object-cover rounded-lg"}):(0,s.jsx)("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"No Image"})})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)(o(),{href:`/products/${e.product._id}`,className:"text-lg font-medium text-gray-900 hover:text-blue-600 transition-colors",children:e.product.name}),(0,s.jsxs)("p",{className:"text-gray-600",children:["$",e.price.toFixed(2)," each"]}),e.quantity>e.product.stock&&(0,s.jsxs)("p",{className:"text-red-600 text-sm mt-1",children:["Only ",e.product.stock," available in stock"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>h(e.product._id,e.quantity-1),disabled:e.quantity<=1,className:"p-1 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,s.jsx)("span",{className:"w-12 text-center font-medium",children:e.quantity}),(0,s.jsx)("button",{onClick:()=>h(e.product._id,e.quantity+1),disabled:e.quantity>=e.product.stock,className:"p-1 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]}),(0,s.jsx)("button",{onClick:()=>g(e.product._id),className:"text-red-600 hover:text-red-800 text-sm mt-1",children:"Remove"})]})]})},e.product._id))})]})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-24",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:["Subtotal (",x.totalItems," items)"]}),(0,s.jsxs)("span",{className:"font-medium",children:["$",x.totalAmount.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,s.jsx)("span",{className:"font-medium",children:x.totalAmount>50?"Free":"$10.00"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Tax"}),(0,s.jsx)("span",{className:"font-medium",children:"$0.00"})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-lg font-semibold",children:"Total"}),(0,s.jsxs)("span",{className:"text-lg font-semibold",children:["$",(x.totalAmount+(x.totalAmount>50?0:10)).toFixed(2)]})]})})]}),x.totalAmount<50&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6",children:(0,s.jsxs)("p",{className:"text-blue-800 text-sm",children:["Add $",(50-x.totalAmount).toFixed(2)," more for free shipping!"]})}),(0,s.jsx)("button",{onClick:()=>{e.push("/checkout")},className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Proceed to Checkout"}),(0,s.jsx)(o(),{href:"/products",className:"block w-full text-center text-blue-600 py-3 px-4 border border-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors mt-3",children:"Continue Shopping"})]})})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9m-9 0h9"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"Start shopping to add items to your cart"}),(0,s.jsx)(o(),{href:"/products",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]})]})]})})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70905:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Acer\\\\Desktop\\\\ecommerce\\\\frontend\\\\src\\\\app\\\\cart\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\cart\\page.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},75452:(e,t,r)=>{"use strict";r.d(t,{AP:()=>l,IM:()=>c,lj:()=>u,uM:()=>d});var s=r(8693),a=r(54050),i=r(78370),o=r(37307),n=r(37590);let l=()=>{let e=(0,s.jE)(),{setCart:t}=(0,o.Nc)();return(0,a.n)({mutationFn:i.z.addToCart,onSuccess:r=>{t(r.data),e.setQueryData(["cart"],r),n.oR.success("Item added to cart!")},onError:e=>{let t=e.response?.data?.message||"Failed to add item to cart";n.oR.error(t)}})},d=()=>{let e=(0,s.jE)(),{setCart:t}=(0,o.Nc)();return(0,a.n)({mutationFn:({productId:e,quantity:t})=>i.z.updateCartItem(e,{quantity:t}),onSuccess:r=>{t(r.data),e.setQueryData(["cart"],r),n.oR.success("Cart updated!")},onError:e=>{let t=e.response?.data?.message||"Failed to update cart";n.oR.error(t)}})},c=()=>{let e=(0,s.jE)(),{setCart:t}=(0,o.Nc)();return(0,a.n)({mutationFn:i.z.removeFromCart,onSuccess:r=>{t(r.data),e.setQueryData(["cart"],r),n.oR.success("Item removed from cart!")},onError:e=>{let t=e.response?.data?.message||"Failed to remove item";n.oR.error(t)}})},u=()=>{let e=(0,s.jE)(),{clearCart:t}=(0,o.Nc)();return(0,a.n)({mutationFn:i.z.clearCart,onSuccess:r=>{t(),e.setQueryData(["cart"],r),n.oR.success("Cart cleared!")},onError:e=>{let t=e.response?.data?.message||"Failed to clear cart";n.oR.error(t)}})}},79551:e=>{"use strict";e.exports=require("url")},80068:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(60687);r(43210);var a=r(16189),i=r(42243);function o({children:e,redirectTo:t="/products",showMessage:r=!0}){let{isAuthenticated:o,isAdmin:n,isLoading:l}=(0,i.As)();return((0,a.useRouter)(),l)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):!o||n?null:(0,s.jsx)(s.Fragment,{children:e})}r(37590)},81630:e=>{"use strict";e.exports=require("http")},82200:(e,t,r)=>{Promise.resolve().then(r.bind(r,49483))},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")},97880:(e,t,r)=>{Promise.resolve().then(r.bind(r,70905))}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,157,658,337,423,474,476],()=>r(18773));module.exports=s})();