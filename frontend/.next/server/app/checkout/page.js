(()=>{var e={};e.id=279,e.ids=[279],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4326:(e,t,r)=>{Promise.resolve().then(r.bind(r,30277))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},12574:(e,t,r)=>{Promise.resolve().then(r.bind(r,54787))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20769:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(60687);r(43210);var a=r(16189),i=r(42243);function n({children:e,requireAuth:t=!0,requireAdmin:r=!1,redirectTo:n="/auth/login"}){let{isAuthenticated:d,isAdmin:l}=(0,i.As)();return((0,a.useRouter)(),t&&!d)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):r&&!l?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-600",children:"You dont have permission to access this page."})]})}):(0,s.jsx)(s.Fragment,{children:e})}},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30277:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(60687),a=r(16189),i=r(46815),n=r(30485),d=r(21891),l=r(80068),o=r(96804),c=r(8693),m=r(54050),u=r(88565),x=r(37307),p=r(37590),h=r(20769);let y=n.Ik().shape({fullName:n.Yj().min(2,"Full name must be at least 2 characters").max(100,"Full name must be less than 100 characters").required("Full name is required"),street:n.Yj().min(5,"Street address must be at least 5 characters").max(200,"Street address must be less than 200 characters").required("Street address is required"),city:n.Yj().min(2,"City must be at least 2 characters").max(50,"City must be less than 50 characters").required("City is required"),state:n.Yj().min(2,"State must be at least 2 characters").max(50,"State must be less than 50 characters").required("State is required"),zipCode:n.Yj().min(5,"ZIP code must be at least 5 characters").max(10,"ZIP code must be less than 10 characters").required("ZIP code is required"),country:n.Yj().min(2,"Country must be at least 2 characters").max(50,"Country must be less than 50 characters").required("Country is required"),phone:n.Yj().matches(/^[\+]?[1-9][\d]{0,15}$/,"Invalid phone number").optional(),paymentMethod:n.Yj().oneOf(["cash_on_delivery","credit_card","debit_card","paypal"]).required("Payment method is required")});function g(){let e=(0,a.useRouter)(),t=(0,c.jE)(),{data:r,isLoading:n}=(0,o._)(),{clearCart:g}=(0,x.Nc)(),b=r?.data,f=(0,m.n)({mutationFn:u.c.createOrder,onSuccess:r=>{g(),t.invalidateQueries({queryKey:["cart"]}),t.invalidateQueries({queryKey:["orders"]}),p.oR.success("Order placed successfully!"),e.push(`/orders/${r.data._id}`)},onError:e=>{let t=e.response?.data?.message||"Failed to place order";p.oR.error(t)}});if(n)return(0,s.jsx)(h.A,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(d.A,{}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/4 mb-8"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)("div",{className:"space-y-4",children:[...Array(8)].map((e,t)=>(0,s.jsx)("div",{className:"h-12 bg-gray-300 rounded"},t))}),(0,s.jsx)("div",{className:"h-64 bg-gray-300 rounded"})]})]})})]})});if(!b||0===b.items.length)return(0,s.jsx)(l.A,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(d.A,{}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"Add some items to your cart before checkout"}),(0,s.jsx)("button",{onClick:()=>e.push("/products"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]})})]})});let j=b.totalAmount,v=j>50?0:10,N=j+v+0;return(0,s.jsx)(l.A,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(d.A,{}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),(0,s.jsx)(i.l1,{initialValues:{fullName:"",street:"",city:"",state:"",zipCode:"",country:"USA",phone:"",paymentMethod:"cash_on_delivery"},validationSchema:y,onSubmit:(e,{setSubmitting:t})=>{let r={shippingAddress:{fullName:e.fullName,street:e.street,city:e.city,state:e.state,zipCode:e.zipCode,country:e.country,phone:e.phone||void 0},paymentMethod:e.paymentMethod};f.mutate(r,{onSettled:()=>t(!1)})},children:({isSubmitting:e})=>(0,s.jsx)(i.lV,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Shipping Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,s.jsx)(i.D0,{id:"fullName",name:"fullName",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)(i.Kw,{name:"fullName",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),(0,s.jsx)(i.D0,{id:"street",name:"street",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)(i.Kw,{name:"street",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,s.jsx)(i.D0,{id:"city",name:"city",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)(i.Kw,{name:"city",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,s.jsx)(i.D0,{id:"state",name:"state",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)(i.Kw,{name:"state",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),(0,s.jsx)(i.D0,{id:"zipCode",name:"zipCode",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)(i.Kw,{name:"zipCode",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),(0,s.jsx)(i.D0,{id:"country",name:"country",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)(i.Kw,{name:"country",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,s.jsx)(i.D0,{id:"phone",name:"phone",type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)(i.Kw,{name:"phone",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),(0,s.jsxs)(i.D0,{as:"select",id:"paymentMethod",name:"paymentMethod",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"cash_on_delivery",children:"Cash on Delivery"}),(0,s.jsx)("option",{value:"credit_card",children:"Credit Card"}),(0,s.jsx)("option",{value:"debit_card",children:"Debit Card"}),(0,s.jsx)("option",{value:"paypal",children:"PayPal"})]}),(0,s.jsx)(i.Kw,{name:"paymentMethod",component:"div",className:"mt-1 text-sm text-red-600"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 h-fit",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Order Summary"}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:b.items.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 rounded"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.product.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity]})]}),(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.product._id))}),(0,s.jsxs)("div",{className:"space-y-3 border-t border-gray-200 pt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-medium",children:["$",j.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,s.jsx)("span",{className:"font-medium",children:0===v?"Free":`$${v.toFixed(2)}`})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Tax"}),(0,s.jsxs)("span",{className:"font-medium",children:["$","0.00"]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-lg font-semibold",children:"Total"}),(0,s.jsxs)("span",{className:"text-lg font-semibold",children:["$",N.toFixed(2)]})]})})]}),(0,s.jsx)("button",{type:"submit",disabled:e||f.isPending,className:"w-full mt-6 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e||f.isPending?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Placing Order..."]}):"Place Order"})]})]})})})]})]})})}},33873:e=>{"use strict";e.exports=require("path")},37307:(e,t,r)=>{"use strict";r.d(t,{Nc:()=>n});var s=r(26787),a=r(59350);let i=(0,s.v)()((0,a.Zr)((e,t)=>({cart:null,isLoading:!1,error:null,setCart:t=>{e({cart:t,error:null})},addItem:r=>{let s,a=t().cart;if(!a)return void e({cart:{items:[r],totalItems:r.quantity,totalAmount:r.price*r.quantity,lastModified:new Date().toISOString()}});let i=a.items.findIndex(e=>e.product._id===r.product._id);i>-1?(s=[...a.items])[i]={...s[i],quantity:s[i].quantity+r.quantity,price:r.price}:s=[...a.items,r];let n={...a,items:s,lastModified:new Date().toISOString()};n.totalItems=s.reduce((e,t)=>e+t.quantity,0),n.totalAmount=s.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:n})},updateItemQuantity:(r,s)=>{let a,i=t().cart;if(!i)return;a=s<=0?i.items.filter(e=>e.product._id!==r):i.items.map(e=>e.product._id===r?{...e,quantity:s}:e);let n={...i,items:a,lastModified:new Date().toISOString()};n.totalItems=a.reduce((e,t)=>e+t.quantity,0),n.totalAmount=a.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:n})},removeItem:r=>{let s=t().cart;if(!s)return;let a=s.items.filter(e=>e.product._id!==r),i={...s,items:a,lastModified:new Date().toISOString()};i.totalItems=a.reduce((e,t)=>e+t.quantity,0),i.totalAmount=a.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:i})},clearCart:()=>{e({cart:{items:[],totalItems:0,totalAmount:0,lastModified:new Date().toISOString()}})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},clearError:()=>{e({error:null})},calculateTotals:()=>{let r=t().cart;if(!r)return;let s=r.items.reduce((e,t)=>e+t.quantity,0),a=r.items.reduce((e,t)=>e+t.price*t.quantity,0);e({cart:{...r,totalItems:s,totalAmount:a,lastModified:new Date().toISOString()}})}}),{name:"cart-storage",partialize:e=>({cart:e.cart})})),n=()=>{let e=i();return{setCart:e.setCart,addItem:e.addItem,updateItemQuantity:e.updateItemQuantity,removeItem:e.removeItem,clearCart:e.clearCart,setLoading:e.setLoading,setError:e.setError,clearError:e.clearError,calculateTotals:e.calculateTotals}}},54787:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Acer\\\\Desktop\\\\ecommerce\\\\frontend\\\\src\\\\app\\\\checkout\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\checkout\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71109:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var s=r(65239),a=r(48088),i=r(88170),n=r.n(i),d=r(30893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let o={children:["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54787)),"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\checkout\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\checkout\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},80068:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(60687);r(43210);var a=r(16189),i=r(42243);function n({children:e,redirectTo:t="/products",showMessage:r=!0}){let{isAuthenticated:n,isAdmin:d,isLoading:l}=(0,i.As)();return((0,a.useRouter)(),l)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):!n||d?null:(0,s.jsx)(s.Fragment,{children:e})}r(37590)},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},88565:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var s=r(71114);let a={createOrder:async e=>(await s.Ay.post("/orders",e)).data,getMyOrders:async(e={})=>{let t=new URLSearchParams;return Object.entries(e).forEach(([e,r])=>{null!=r&&t.append(e,r.toString())}),(await s.Ay.get(`/orders?${t.toString()}`)).data},getOrder:async e=>(await s.Ay.get(`/orders/${e}`)).data,cancelOrder:async(e,t)=>(await s.Ay.put(`/orders/${e}/cancel`,t)).data,getAllOrders:async(e={})=>{let t=new URLSearchParams;return Object.entries(e).forEach(([e,r])=>{null!=r&&t.append(e,r.toString())}),(await s.Ay.get(`/orders/admin/all?${t.toString()}`)).data},updateOrderStatus:async(e,t)=>(await s.Ay.put(`/orders/${e}/status`,t)).data,getUserOrders:async(e={})=>a.getMyOrders(e)}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,157,658,337,423,23,476],()=>r(71109));module.exports=s})();