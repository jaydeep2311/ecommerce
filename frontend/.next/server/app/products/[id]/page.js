(()=>{var e={};e.id=403,e.ids=[403],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16399:(e,s,r)=>{Promise.resolve().then(r.bind(r,44233))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},25601:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>d.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var t=r(65239),a=r(48088),i=r(88170),d=r.n(i),l=r(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(s,n);let c={children:["",{children:["products",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44233)),"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\products\\[id]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\products\\[id]\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/products/[id]/page",pathname:"/products/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44233:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Acer\\\\Desktop\\\\ecommerce\\\\frontend\\\\src\\\\app\\\\products\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Acer\\Desktop\\ecommerce\\frontend\\src\\app\\products\\[id]\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56176:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>N});var t=r(60687),a=r(43210),i=r(16189),d=r(30474),l=r(85814),n=r.n(l),c=r(21891),o=r(14973),m=r(46815),x=r(30485),u=r(42243),p=r(75622),h=r(63455),g=r(37590);let b=x.Ik().shape({rating:x.ai().min(1,"Please select a rating").max(5,"Rating cannot be more than 5").required("Rating is required"),comment:x.Yj().max(500,"Comment cannot be more than 500 characters").optional()}),j=({review:e})=>(0,t.jsx)("div",{className:"border-b border-gray-200 pb-6 mb-6 last:border-b-0",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:e.user.name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.user.name}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.A,{rating:e.rating,readonly:!0}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]})]})}),e.comment&&(0,t.jsx)("p",{className:"text-gray-700 mt-2",children:e.comment})]})]})});function v({productId:e,reviews:s,averageRating:r,totalReviews:i,userHasReviewed:d=!1}){let{isAuthenticated:l,user:n}=(0,u.As)(),[c,o]=(0,a.useState)(!1),x=(0,p._T)(),v=s.find(e=>e.user._id===n?._id),y=d||!!v;return(0,t.jsx)("div",{className:"mt-12",children:(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customer Reviews"}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-gray-900",children:r.toFixed(1)}),(0,t.jsx)(h.A,{rating:r,readonly:!0,size:"lg"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Based on ",i," review",1!==i?"s":""]})]})}),l&&!y&&(0,t.jsx)("button",{onClick:()=>o(!c),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Write a Review"}),!l&&(0,t.jsx)("p",{className:"text-gray-600",children:"Please login to write a review"}),y&&(0,t.jsx)("p",{className:"text-green-600",children:"You have already reviewed this product"})]})}),c&&l&&!y&&(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-8",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Write Your Review"}),(0,t.jsx)(m.l1,{initialValues:{rating:0,comment:""},validationSchema:b,onSubmit:(s,{setSubmitting:r,resetForm:t})=>{x.mutate({productId:e,data:s},{onSuccess:()=>{t(),o(!1),g.oR.success("Review added successfully!")},onSettled:()=>r(!1)})},children:({values:e,setFieldValue:s,isSubmitting:r})=>(0,t.jsxs)(m.lV,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating *"}),(0,t.jsx)(h.A,{rating:e.rating,onRatingChange:e=>s("rating",e),size:"lg"}),(0,t.jsx)(m.Kw,{name:"rating",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comment (Optional)"}),(0,t.jsx)(m.D0,{as:"textarea",id:"comment",name:"comment",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Share your experience with this product..."}),(0,t.jsx)(m.Kw,{name:"comment",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("button",{type:"submit",disabled:r||x.isPending,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r||x.isPending?"Submitting...":"Submit Review"}),(0,t.jsx)("button",{type:"button",onClick:()=>o(!1),className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})})]}),(0,t.jsx)("div",{children:s.length>0?(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-lg font-semibold mb-6",children:["All Reviews (",s.length,")"]}),s.map((e,s)=>(0,t.jsx)(j,{review:e},s))]}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-600",children:"No reviews yet. Be the first to review this product!"})})})]})})}var y=r(64638),f=r(75452);function N(){let e=(0,i.useParams)(),s=e?.id??"",[r,l]=(0,a.useState)(0),[m,x]=(0,a.useState)(1),{data:p,isLoading:b,error:j}=(0,y.Bj)(s?.toString()??""),N=p?.data,{data:w}=(0,y.DS)(N?.category||"",s?.toString()??"",4),{isAuthenticated:P,isAdmin:k}=(0,u.As)(),q=(0,f.AP)();return b?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsx)("div",{className:"h-96 bg-gray-300 rounded"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-300 rounded"}),(0,t.jsx)("div",{className:"h-4 bg-gray-300 rounded w-2/3"}),(0,t.jsx)("div",{className:"h-6 bg-gray-300 rounded w-1/3"}),(0,t.jsx)("div",{className:"h-20 bg-gray-300 rounded"})]})]})})})]}):j||!N?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"The product youre looking for doesnt exist."}),(0,t.jsx)(n(),{href:"/products",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Products"})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(c.A,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("nav",{className:"mb-8",children:(0,t.jsxs)("ol",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/",className:"hover:text-blue-600",children:"Home"})}),(0,t.jsx)("li",{children:"/"}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/products",className:"hover:text-blue-600",children:"Products"})}),(0,t.jsx)("li",{children:"/"}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:`/products?category=${N.category}`,className:"hover:text-blue-600",children:N.category})}),(0,t.jsx)("li",{children:"/"}),(0,t.jsx)("li",{className:"text-gray-900",children:N.name})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("div",{className:"relative h-96 w-full",children:N.images[r]?(0,t.jsx)(d.default,{src:N.images[r].url,alt:N.images[r].alt||N.name,fill:!0,className:"object-cover rounded-lg"}):(0,t.jsx)("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-gray-400",children:"No Image"})})})}),N.images.length>1&&(0,t.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:N.images.map((e,s)=>(0,t.jsx)("button",{onClick:()=>l(s),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 ${r===s?"border-blue-600":"border-gray-300"}`,children:(0,t.jsx)(d.default,{src:e.url,alt:e.alt||N.name,width:80,height:80,className:"object-cover w-full h-full"})},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:N.name}),N.brand&&(0,t.jsxs)("p",{className:"text-lg text-gray-600 mb-4",children:["by ",N.brand]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(h.A,{rating:N.rating.average,readonly:!0,size:"md",showValue:!0,totalReviews:N.rating.count})}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["$",N.price.toFixed(2)]}),N.originalPrice&&N.originalPrice>N.price&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"text-xl text-gray-500 line-through",children:["$",N.originalPrice.toFixed(2)]}),(0,t.jsxs)("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium",children:[N.discountPercentage,"% OFF"]})]})]})}),(0,t.jsxs)("div",{className:"mb-6",children:["in_stock"===N.stockStatus&&(0,t.jsxs)("span",{className:"text-green-600 font-medium",children:["✓ In Stock (",N.stock," available)"]}),"low_stock"===N.stockStatus&&(0,t.jsxs)("span",{className:"text-orange-600 font-medium",children:["⚠ Low Stock (",N.stock," left)"]}),"out_of_stock"===N.stockStatus&&(0,t.jsx)("span",{className:"text-red-600 font-medium",children:"✗ Out of Stock"})]}),"out_of_stock"!==N.stockStatus&&!k&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),(0,t.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-md",children:[(0,t.jsx)("button",{onClick:()=>x(Math.max(1,m-1)),className:"px-3 py-2 hover:bg-gray-100",children:"-"}),(0,t.jsx)("span",{className:"px-4 py-2 border-x border-gray-300",children:m}),(0,t.jsx)("button",{onClick:()=>x(Math.min(N.stock,m+1)),className:"px-3 py-2 hover:bg-gray-100",children:"+"})]})]}),(0,t.jsx)("button",{onClick:()=>{if(!P)return void g.oR.error("Please login to add items to cart");if(k)return void g.oR.error("Cart functionality is not available for admin users");if(N){if(0===N.stock)return void g.oR.error("Product is out of stock");if(m>N.stock)return void g.oR.error(`Only ${N.stock} items available`);q.mutate({productId:N._id,quantity:m})}},disabled:q.isPending,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:q.isPending?"Adding to Cart...":"Add to Cart"})]}),k&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(n(),{href:`/products/manage?edit=${N._id}`,className:"flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-gray-700 transition-colors text-center",children:"Edit Product"}),(0,t.jsx)(n(),{href:"/products/add",className:"flex-1 bg-green-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-green-700 transition-colors text-center",children:"Add New Product"})]})}),N.features&&N.features.length>0&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Key Features"}),(0,t.jsx)("ul",{className:"space-y-2",children:N.features.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-blue-600 mr-2",children:"•"}),(0,t.jsx)("span",{className:"text-gray-700",children:e})]},s))})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Description"}),(0,t.jsx)("div",{className:"prose max-w-none",children:(0,t.jsx)("p",{className:"text-gray-700 leading-relaxed",children:N.description})})]}),N.specifications&&Object.keys(N.specifications).length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Specifications"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(N.specifications).map(([e,s])=>(0,t.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[(0,t.jsxs)("span",{className:"font-medium text-gray-700",children:[e,":"]}),(0,t.jsx)("span",{className:"text-gray-600",children:s})]},e))})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:(0,t.jsx)(v,{productId:N._id,reviews:N.reviews,averageRating:N.rating.average,totalReviews:N.rating.count})}),w&&w.data.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Related Products"}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:w.data.map(e=>(0,t.jsx)(o.A,{product:e},e._id))})]})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},75622:(e,s,r)=>{"use strict";r.d(s,{CC:()=>n,HT:()=>m,Pg:()=>l,W$:()=>c,_T:()=>o});var t=r(8693),a=r(54050),i=r(6580),d=r(37590);let l=()=>{let e=(0,t.jE)();return(0,a.n)({mutationFn:i.Z.createProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),d.oR.success("Product created successfully!")},onError:e=>{let s=e.response?.data?.message||"Failed to create product";d.oR.error(s)}})},n=()=>{let e=(0,t.jE)();return(0,a.n)({mutationFn:({id:e,data:s})=>i.Z.updateProduct(e,s),onSuccess:(s,r)=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["products",r.id]}),e.invalidateQueries({queryKey:["admin","products"]}),d.oR.success("Product updated successfully!")},onError:e=>{let s=e.response?.data?.message||"Failed to update product";d.oR.error(s)}})},c=()=>{let e=(0,t.jE)();return(0,a.n)({mutationFn:i.Z.deleteProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),d.oR.success("Product deleted successfully")},onError:e=>{let s=e.response?.data?.message||"Failed to delete product";d.oR.error(s)}})},o=()=>{let e=(0,t.jE)();return(0,a.n)({mutationFn:({productId:e,data:s})=>i.Z.addReview(e,s),onSuccess:(s,r)=>{e.invalidateQueries({queryKey:["products",r.productId]}),e.invalidateQueries({queryKey:["products"]}),d.oR.success("Review added successfully!")},onError:e=>{let s=e.response?.data?.message||"Failed to add review";d.oR.error(s)}})},m=()=>{let e=(0,t.jE)();return(0,a.n)({mutationFn:i.Z.restoreProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),e.invalidateQueries({queryKey:["admin","deleted-products"]}),d.oR.success("Product restored successfully!")},onError:e=>{let s=e.response?.data?.message||"Failed to restore product";d.oR.error(s)}})}},76231:(e,s,r)=>{Promise.resolve().then(r.bind(r,56176))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,157,658,337,423,23,474,476,634],()=>r(25601));module.exports=t})();