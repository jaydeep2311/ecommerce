"use strict";exports.id=634,exports.ids=[634],exports.modules={6580:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(71114);let s={getProducts:async(t={})=>{let e=new URLSearchParams;return Object.entries(t).forEach(([t,a])=>{null!=a&&(Array.isArray(a)?a.forEach(a=>e.append(t,a.toString())):e.append(t,a.toString()))}),(await r.Ay.get(`/products?${e.toString()}`)).data},getProduct:async t=>(await r.Ay.get(`/products/${t}`)).data,createProduct:async t=>(await r.Ay.post("/products",t)).data,updateProduct:async(t,e)=>(await r.Ay.put(`/products/${t}`,e)).data,deleteProduct:async t=>(await r.Ay.delete(`/products/${t}`)).data,getCategories:async()=>(await r.Ay.get("/products/categories")).data,getBrands:async()=>(await r.Ay.get("/products/brands")).data,getFeaturedProducts:async(t=8)=>(await r.Ay.get(`/products?featured=true&limit=${t}`)).data,getRelatedProducts:async(t,e,a=4)=>(await r.Ay.get(`/products?category=${t}&limit=${a}&exclude=${e}`)).data,addReview:async(t,e)=>(await r.Ay.post(`/products/${t}/reviews`,e)).data,restoreProduct:async t=>(await r.Ay.put(`/products/${t}/restore`)).data,getDeletedProducts:async(t={})=>(await r.Ay.get("/products/deleted/all",{params:t})).data}},14973:(t,e,a)=>{a.d(e,{A:()=>u});var r=a(60687),s=a(30474),o=a(85814),i=a.n(o),d=a(42243),c=a(75452),n=a(63455),l=a(37590);function u({product:t}){let{isAuthenticated:e,isAdmin:a}=(0,d.As)(),o=(0,c.AP)(),u=t.primaryImage||t.images[0];return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[(0,r.jsx)(i(),{href:`/products/${t._id}`,children:(0,r.jsxs)("div",{className:"relative h-48 w-full",children:[u?(0,r.jsx)(s.default,{src:u.url,alt:u.alt||t.name,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400",children:"No Image"})}),t.discountPercentage>0&&(0,r.jsxs)("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-sm font-medium",children:["-",t.discountPercentage,"%"]}),"out_of_stock"===t.stockStatus&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-medium",children:"Out of Stock"})})]})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)(i(),{href:`/products/${t._id}`,children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 hover:text-blue-600 transition-colors line-clamp-2",children:t.name})}),t.brand&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:t.brand}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(n.A,{rating:t.rating.average,readonly:!0,size:"sm",showValue:!0,totalReviews:t.rating.count})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:["$",t.price.toFixed(2)]}),t.originalPrice&&t.originalPrice>t.price&&(0,r.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",t.originalPrice.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"text-sm",children:["low_stock"===t.stockStatus&&(0,r.jsx)("span",{className:"text-orange-500 font-medium",children:"Low Stock"}),"in_stock"===t.stockStatus&&(0,r.jsx)("span",{className:"text-green-500 font-medium",children:"In Stock"})]})]}),!a&&(0,r.jsx)("button",{onClick:()=>e?a?void l.oR.error("Cart functionality is not available for admin users"):0===t.stock?void l.oR.error("Product is out of stock"):void o.mutate({productId:t._id,quantity:1}):void l.oR.error("Please login to add items to cart"),disabled:"out_of_stock"===t.stockStatus||o.isPending,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${"out_of_stock"===t.stockStatus||o.isPending?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"out_of_stock"===t.stockStatus?"Out of Stock":o.isPending?"Adding...":"Add to Cart"}),a&&(0,r.jsx)(i(),{href:`/products/manage?edit=${t._id}`,className:"w-full py-2 px-4 rounded-lg font-medium transition-colors bg-gray-600 text-white hover:bg-gray-700 text-center block",children:"Manage Product"})]})]})}},37307:(t,e,a)=>{a.d(e,{Nc:()=>i});var r=a(26787),s=a(59350);let o=(0,r.v)()((0,s.Zr)((t,e)=>({cart:null,isLoading:!1,error:null,setCart:e=>{t({cart:e,error:null})},addItem:a=>{let r,s=e().cart;if(!s)return void t({cart:{items:[a],totalItems:a.quantity,totalAmount:a.price*a.quantity,lastModified:new Date().toISOString()}});let o=s.items.findIndex(t=>t.product._id===a.product._id);o>-1?(r=[...s.items])[o]={...r[o],quantity:r[o].quantity+a.quantity,price:a.price}:r=[...s.items,a];let i={...s,items:r,lastModified:new Date().toISOString()};i.totalItems=r.reduce((t,e)=>t+e.quantity,0),i.totalAmount=r.reduce((t,e)=>t+e.price*e.quantity,0),t({cart:i})},updateItemQuantity:(a,r)=>{let s,o=e().cart;if(!o)return;s=r<=0?o.items.filter(t=>t.product._id!==a):o.items.map(t=>t.product._id===a?{...t,quantity:r}:t);let i={...o,items:s,lastModified:new Date().toISOString()};i.totalItems=s.reduce((t,e)=>t+e.quantity,0),i.totalAmount=s.reduce((t,e)=>t+e.price*e.quantity,0),t({cart:i})},removeItem:a=>{let r=e().cart;if(!r)return;let s=r.items.filter(t=>t.product._id!==a),o={...r,items:s,lastModified:new Date().toISOString()};o.totalItems=s.reduce((t,e)=>t+e.quantity,0),o.totalAmount=s.reduce((t,e)=>t+e.price*e.quantity,0),t({cart:o})},clearCart:()=>{t({cart:{items:[],totalItems:0,totalAmount:0,lastModified:new Date().toISOString()}})},setLoading:e=>{t({isLoading:e})},setError:e=>{t({error:e})},clearError:()=>{t({error:null})},calculateTotals:()=>{let a=e().cart;if(!a)return;let r=a.items.reduce((t,e)=>t+e.quantity,0),s=a.items.reduce((t,e)=>t+e.price*e.quantity,0);t({cart:{...a,totalItems:r,totalAmount:s,lastModified:new Date().toISOString()}})}}),{name:"cart-storage",partialize:t=>({cart:t.cart})})),i=()=>{let t=o();return{setCart:t.setCart,addItem:t.addItem,updateItemQuantity:t.updateItemQuantity,removeItem:t.removeItem,clearCart:t.clearCart,setLoading:t.setLoading,setError:t.setError,clearError:t.clearError,calculateTotals:t.calculateTotals}}},63455:(t,e,a)=>{a.d(e,{A:()=>o});var r=a(60687),s=a(43210);function o({rating:t,onRatingChange:e,readonly:a=!1,size:o="md",showValue:i=!1,totalReviews:d}){let[c,n]=(0,s.useState)(0),l={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map(s=>(0,r.jsx)("button",{type:"button",disabled:a,className:`${a?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,onClick:()=>!a&&e?.(s),onMouseEnter:()=>!a&&n(s),onMouseLeave:()=>!a&&n(0),children:(0,r.jsx)("svg",{className:`${l[o]} ${s<=(c||t)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},s))}),i&&(0,r.jsxs)("span",{className:`ml-2 text-gray-600 ${{sm:"text-sm",md:"text-base",lg:"text-lg"}[o]}`,children:[t.toFixed(1),void 0!==d&&` (${d} review${1!==d?"s":""})`]})]})}},64638:(t,e,a)=>{a.d(e,{Bj:()=>i,Ck:()=>d,DS:()=>l,Ek:()=>c,QT:()=>o,iV:()=>n,xo:()=>u});var r=a(51423),s=a(6580);let o=(t={})=>(0,r.I)({queryKey:["products",t],queryFn:()=>s.Z.getProducts(t),staleTime:12e4}),i=t=>(0,r.I)({queryKey:["products",t],queryFn:()=>s.Z.getProduct(t),enabled:!!t,staleTime:3e5}),d=()=>(0,r.I)({queryKey:["products","categories"],queryFn:s.Z.getCategories,staleTime:18e5}),c=()=>(0,r.I)({queryKey:["products","brands"],queryFn:s.Z.getBrands,staleTime:18e5}),n=(t=8)=>(0,r.I)({queryKey:["products","featured",t],queryFn:()=>s.Z.getProducts({featured:!0,limit:t}),staleTime:6e5}),l=(t,e,a=4)=>(0,r.I)({queryKey:["products","related",t,e,a],queryFn:()=>s.Z.getProducts({category:t,limit:a}),enabled:!!t,staleTime:3e5,select:t=>({...t,data:t.data.filter(t=>t._id!==e)})}),u=(t={})=>(0,r.I)({queryKey:["admin","deleted-products",t],queryFn:()=>s.Z.getDeletedProducts(t),staleTime:6e4})},75452:(t,e,a)=>{a.d(e,{AP:()=>c,IM:()=>l,lj:()=>u,uM:()=>n});var r=a(8693),s=a(54050),o=a(78370),i=a(37307),d=a(37590);let c=()=>{let t=(0,r.jE)(),{setCart:e}=(0,i.Nc)();return(0,s.n)({mutationFn:o.z.addToCart,onSuccess:a=>{e(a.data),t.setQueryData(["cart"],a),d.oR.success("Item added to cart!")},onError:t=>{let e=t.response?.data?.message||"Failed to add item to cart";d.oR.error(e)}})},n=()=>{let t=(0,r.jE)(),{setCart:e}=(0,i.Nc)();return(0,s.n)({mutationFn:({productId:t,quantity:e})=>o.z.updateCartItem(t,{quantity:e}),onSuccess:a=>{e(a.data),t.setQueryData(["cart"],a),d.oR.success("Cart updated!")},onError:t=>{let e=t.response?.data?.message||"Failed to update cart";d.oR.error(e)}})},l=()=>{let t=(0,r.jE)(),{setCart:e}=(0,i.Nc)();return(0,s.n)({mutationFn:o.z.removeFromCart,onSuccess:a=>{e(a.data),t.setQueryData(["cart"],a),d.oR.success("Item removed from cart!")},onError:t=>{let e=t.response?.data?.message||"Failed to remove item";d.oR.error(e)}})},u=()=>{let t=(0,r.jE)(),{clearCart:e}=(0,i.Nc)();return(0,s.n)({mutationFn:o.z.clearCart,onSuccess:a=>{e(),t.setQueryData(["cart"],a),d.oR.success("Cart cleared!")},onError:t=>{let e=t.response?.data?.message||"Failed to clear cart";d.oR.error(e)}})}}};