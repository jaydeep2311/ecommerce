"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[902],{2250:(t,e,a)=>{a.d(e,{AP:()=>i,IM:()=>l,lj:()=>u,uM:()=>d});var r=a(6715),s=a(5041),o=a(9950),c=a(9135),n=a(3568);let i=()=>{let t=(0,r.jE)(),{setCart:e}=(0,c.Nc)();return(0,s.n)({mutationFn:o.z.addToCart,onSuccess:a=>{e(a.data),t.setQueryData(["cart"],a),n.oR.success("Item added to cart!")},onError:t=>{var e,a;let r=(null==(a=t.response)||null==(e=a.data)?void 0:e.message)||"Failed to add item to cart";n.oR.error(r)}})},d=()=>{let t=(0,r.jE)(),{setCart:e}=(0,c.Nc)();return(0,s.n)({mutationFn:t=>{let{productId:e,quantity:a}=t;return o.z.updateCartItem(e,{quantity:a})},onSuccess:a=>{e(a.data),t.setQueryData(["cart"],a),n.oR.success("Cart updated!")},onError:t=>{var e,a;let r=(null==(a=t.response)||null==(e=a.data)?void 0:e.message)||"Failed to update cart";n.oR.error(r)}})},l=()=>{let t=(0,r.jE)(),{setCart:e}=(0,c.Nc)();return(0,s.n)({mutationFn:o.z.removeFromCart,onSuccess:a=>{e(a.data),t.setQueryData(["cart"],a),n.oR.success("Item removed from cart!")},onError:t=>{var e,a;let r=(null==(a=t.response)||null==(e=a.data)?void 0:e.message)||"Failed to remove item";n.oR.error(r)}})},u=()=>{let t=(0,r.jE)(),{clearCart:e}=(0,c.Nc)();return(0,s.n)({mutationFn:o.z.clearCart,onSuccess:a=>{e(),t.setQueryData(["cart"],a),n.oR.success("Cart cleared!")},onError:t=>{var e,a;let r=(null==(a=t.response)||null==(e=a.data)?void 0:e.message)||"Failed to clear cart";n.oR.error(r)}})}},3303:(t,e,a)=>{a.d(e,{A:()=>o});var r=a(5155),s=a(2115);function o(t){let{rating:e,onRatingChange:a,readonly:o=!1,size:c="md",showValue:n=!1,totalReviews:i}=t,[d,l]=(0,s.useState)(0),u={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map(t=>(0,r.jsx)("button",{type:"button",disabled:o,className:"".concat(o?"cursor-default":"cursor-pointer hover:scale-110"," transition-transform"),onClick:()=>!o&&(null==a?void 0:a(t)),onMouseEnter:()=>!o&&l(t),onMouseLeave:()=>!o&&l(0),children:(0,r.jsx)("svg",{className:"".concat(u[c]," ").concat(t<=(d||e)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},t))}),n&&(0,r.jsxs)("span",{className:"ml-2 text-gray-600 ".concat({sm:"text-sm",md:"text-base",lg:"text-lg"}[c]),children:[e.toFixed(1),void 0!==i&&" (".concat(i," review").concat(1!==i?"s":"",")")]})]})}},4295:(t,e,a)=>{a.d(e,{A:()=>u});var r=a(5155),s=a(6766),o=a(6874),c=a.n(o),n=a(5159),i=a(2250),d=a(3303),l=a(3568);function u(t){let{product:e}=t,{isAuthenticated:a,isAdmin:o}=(0,n.As)(),u=(0,i.AP)(),m=e.primaryImage||e.images[0];return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[(0,r.jsx)(c(),{href:"/products/".concat(e._id),children:(0,r.jsxs)("div",{className:"relative h-48 w-full",children:[m?(0,r.jsx)(s.default,{src:m.url,alt:m.alt||e.name,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400",children:"No Image"})}),e.discountPercentage>0&&(0,r.jsxs)("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-sm font-medium",children:["-",e.discountPercentage,"%"]}),"out_of_stock"===e.stockStatus&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-medium",children:"Out of Stock"})})]})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)(c(),{href:"/products/".concat(e._id),children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 hover:text-blue-600 transition-colors line-clamp-2",children:e.name})}),e.brand&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:e.brand}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(d.A,{rating:e.rating.average,readonly:!0,size:"sm",showValue:!0,totalReviews:e.rating.count})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:["$",e.price.toFixed(2)]}),e.originalPrice&&e.originalPrice>e.price&&(0,r.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",e.originalPrice.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"text-sm",children:["low_stock"===e.stockStatus&&(0,r.jsx)("span",{className:"text-orange-500 font-medium",children:"Low Stock"}),"in_stock"===e.stockStatus&&(0,r.jsx)("span",{className:"text-green-500 font-medium",children:"In Stock"})]})]}),!o&&(0,r.jsx)("button",{onClick:()=>a?o?void l.oR.error("Cart functionality is not available for admin users"):0===e.stock?void l.oR.error("Product is out of stock"):void u.mutate({productId:e._id,quantity:1}):void l.oR.error("Please login to add items to cart"),disabled:"out_of_stock"===e.stockStatus||u.isPending,className:"w-full py-2 px-4 rounded-lg font-medium transition-colors ".concat("out_of_stock"===e.stockStatus||u.isPending?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"out_of_stock"===e.stockStatus?"Out of Stock":u.isPending?"Adding...":"Add to Cart"}),o&&(0,r.jsx)(c(),{href:"/products/manage?edit=".concat(e._id),className:"w-full py-2 px-4 rounded-lg font-medium transition-colors bg-gray-600 text-white hover:bg-gray-700 text-center block",children:"Manage Product"})]})]})}},6500:(t,e,a)=>{a.d(e,{Bj:()=>c,Ck:()=>n,DS:()=>l,Ek:()=>i,QT:()=>o,iV:()=>d,xo:()=>u});var r=a(2960),s=a(8884);let o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.I)({queryKey:["products",t],queryFn:()=>s.Z.getProducts(t),staleTime:12e4})},c=t=>(0,r.I)({queryKey:["products",t],queryFn:()=>s.Z.getProduct(t),enabled:!!t,staleTime:3e5}),n=()=>(0,r.I)({queryKey:["products","categories"],queryFn:s.Z.getCategories,staleTime:18e5}),i=()=>(0,r.I)({queryKey:["products","brands"],queryFn:s.Z.getBrands,staleTime:18e5}),d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return(0,r.I)({queryKey:["products","featured",t],queryFn:()=>s.Z.getProducts({featured:!0,limit:t}),staleTime:6e5})},l=function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return(0,r.I)({queryKey:["products","related",t,e,a],queryFn:()=>s.Z.getProducts({category:t,limit:a}),enabled:!!t,staleTime:3e5,select:t=>({...t,data:t.data.filter(t=>t._id!==e)})})},u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.I)({queryKey:["admin","deleted-products",t],queryFn:()=>s.Z.getDeletedProducts(t),staleTime:6e4})}},8884:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(5558);let s={getProducts:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new URLSearchParams;return Object.entries(t).forEach(t=>{let[a,r]=t;null!=r&&(Array.isArray(r)?r.forEach(t=>e.append(a,t.toString())):e.append(a,r.toString()))}),(await r.Ay.get("/products?".concat(e.toString()))).data},getProduct:async t=>(await r.Ay.get("/products/".concat(t))).data,createProduct:async t=>(await r.Ay.post("/products",t)).data,updateProduct:async(t,e)=>(await r.Ay.put("/products/".concat(t),e)).data,deleteProduct:async t=>(await r.Ay.delete("/products/".concat(t))).data,getCategories:async()=>(await r.Ay.get("/products/categories")).data,getBrands:async()=>(await r.Ay.get("/products/brands")).data,getFeaturedProducts:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return(await r.Ay.get("/products?featured=true&limit=".concat(t))).data},getRelatedProducts:async function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return(await r.Ay.get("/products?category=".concat(t,"&limit=").concat(a,"&exclude=").concat(e))).data},addReview:async(t,e)=>(await r.Ay.post("/products/".concat(t,"/reviews"),e)).data,restoreProduct:async t=>(await r.Ay.put("/products/".concat(t,"/restore"))).data,getDeletedProducts:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.Ay.get("/products/deleted/all",{params:t})).data}}},9135:(t,e,a)=>{a.d(e,{Nc:()=>c});var r=a(5453),s=a(6786);let o=(0,r.v)()((0,s.Zr)((t,e)=>({cart:null,isLoading:!1,error:null,setCart:e=>{t({cart:e,error:null})},addItem:a=>{let r,s=e().cart;if(!s)return void t({cart:{items:[a],totalItems:a.quantity,totalAmount:a.price*a.quantity,lastModified:new Date().toISOString()}});let o=s.items.findIndex(t=>t.product._id===a.product._id);o>-1?(r=[...s.items])[o]={...r[o],quantity:r[o].quantity+a.quantity,price:a.price}:r=[...s.items,a];let c={...s,items:r,lastModified:new Date().toISOString()};c.totalItems=r.reduce((t,e)=>t+e.quantity,0),c.totalAmount=r.reduce((t,e)=>t+e.price*e.quantity,0),t({cart:c})},updateItemQuantity:(a,r)=>{let s,o=e().cart;if(!o)return;s=r<=0?o.items.filter(t=>t.product._id!==a):o.items.map(t=>t.product._id===a?{...t,quantity:r}:t);let c={...o,items:s,lastModified:new Date().toISOString()};c.totalItems=s.reduce((t,e)=>t+e.quantity,0),c.totalAmount=s.reduce((t,e)=>t+e.price*e.quantity,0),t({cart:c})},removeItem:a=>{let r=e().cart;if(!r)return;let s=r.items.filter(t=>t.product._id!==a),o={...r,items:s,lastModified:new Date().toISOString()};o.totalItems=s.reduce((t,e)=>t+e.quantity,0),o.totalAmount=s.reduce((t,e)=>t+e.price*e.quantity,0),t({cart:o})},clearCart:()=>{t({cart:{items:[],totalItems:0,totalAmount:0,lastModified:new Date().toISOString()}})},setLoading:e=>{t({isLoading:e})},setError:e=>{t({error:e})},clearError:()=>{t({error:null})},calculateTotals:()=>{let a=e().cart;if(!a)return;let r=a.items.reduce((t,e)=>t+e.quantity,0),s=a.items.reduce((t,e)=>t+e.price*e.quantity,0);t({cart:{...a,totalItems:r,totalAmount:s,lastModified:new Date().toISOString()}})}}),{name:"cart-storage",partialize:t=>({cart:t.cart})})),c=()=>{let t=o();return{setCart:t.setCart,addItem:t.addItem,updateItemQuantity:t.updateItemQuantity,removeItem:t.removeItem,clearCart:t.clearCart,setLoading:t.setLoading,setError:t.setError,clearError:t.clearError,calculateTotals:t.calculateTotals}}}}]);