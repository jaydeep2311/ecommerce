(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{3268:(e,s,r)=>{"use strict";r.d(s,{Nu:()=>i,Tk:()=>d,iY:()=>o});var t=r(6715),a=r(5041),n=r(8952),l=r(3568);let d=()=>{let e=(0,t.jE)();return(0,a.n)({mutationFn:n.d.createUser,onSuccess:s=>{e.invalidateQueries({queryKey:["admin","users"]}),l.oR.success(s.message||"User created successfully!")},onError:e=>{var s,r;let t=(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Failed to create user";l.oR.error(t)}})},o=()=>{let e=(0,t.jE)();return(0,a.n)({mutationFn:n.d.deleteUser,onSuccess:()=>{e.invalidateQueries({queryKey:["admin","users"]}),l.oR.success("User deleted successfully")},onError:e=>{var s,r;let t=(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Failed to delete user";l.oR.error(t)}})},i=()=>{let e=(0,t.jE)();return(0,a.n)({mutationFn:n.d.toggleUserStatus,onSuccess:s=>{e.invalidateQueries({queryKey:["admin","users"]}),l.oR.success(s.message||"User status updated successfully!")},onError:e=>{var s,r;let t=(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Failed to update user status";l.oR.error(t)}})}},8323:(e,s,r)=>{Promise.resolve().then(r.bind(r,9180))},8952:(e,s,r)=>{"use strict";r.d(s,{d:()=>a});var t=r(5558);let a={getUsers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.Ay.get("/users",{params:e})).data},getUser:async e=>(await t.Ay.get("/users/".concat(e))).data,createUser:async e=>(await t.Ay.post("/users",e)).data,updateUser:async(e,s)=>(await t.Ay.put("/users/".concat(e),s)).data,deleteUser:async e=>(await t.Ay.delete("/users/".concat(e))).data,restoreUser:async e=>(await t.Ay.put("/users/".concat(e,"/restore"))).data,toggleUserStatus:async e=>(await t.Ay.put("/users/".concat(e,"/toggle-status"))).data}},9053:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var t=r(5155),a=r(2115),n=r(5695),l=r(5159);function d(e){let{children:s,requireAuth:r=!0,requireAdmin:d=!1,redirectTo:o="/auth/login"}=e,{isAuthenticated:i,isAdmin:c}=(0,l.As)(),u=(0,n.useRouter)();return((0,a.useEffect)(()=>r&&!i?void u.push(o):d&&!c?void u.push("/"):void 0,[i,c,r,d,u,o]),r&&!i)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):d&&!c?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You dont have permission to access this page."})]})}):(0,t.jsx)(t.Fragment,{children:s})}},9180:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(5155),a=r(2115),n=r(5695),l=r(6874),d=r.n(l),o=r(4615),i=r(9053),c=r(3268);function u(){var e,s,r,l,u;let m=(0,n.useRouter)(),x=(0,c.Tk)(),[h,p]=(0,a.useState)({name:"",email:"",password:"",role:"user",phone:"",address:{street:"",city:"",state:"",zipCode:"",country:""}}),[g,y]=(0,a.useState)(!1),b=e=>{let{name:s,value:r}=e.target;if(s.startsWith("address.")){let e=s.split(".")[1];p(s=>({...s,address:{...s.address,[e]:r}}))}else p(e=>({...e,[s]:r}))},f=async e=>{if(e.preventDefault(),!h.name||!h.email||!h.password)return void alert("Please fill in all required fields");if(h.password.length<6)return void alert("Password must be at least 6 characters long");try{await x.mutateAsync(h),m.push("/admin/users")}catch(e){console.log({error:e})}};return(0,t.jsx)(i.A,{requireAdmin:!0,children:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(o.A,{}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New User"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Add a new user or administrator to the system"})]}),(0,t.jsx)(d(),{href:"/admin/users",className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"← Back to Users"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md",children:(0,t.jsxs)("form",{onSubmit:f,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,t.jsx)("input",{type:"text",name:"name",value:h.name,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter full name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,t.jsx)("input",{type:"email",name:"email",value:h.email,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:g?"text":"password",name:"password",value:h.password,onChange:b,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10",placeholder:"Enter password (min 6 characters)"}),(0,t.jsx)("button",{type:"button",onClick:()=>y(!g),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:g?(0,t.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,t.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),(0,t.jsxs)("select",{name:"role",value:h.role,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"user",children:"User"}),(0,t.jsx)("option",{value:"admin",children:"Administrator"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"admin"===h.role?"Administrators have full access to manage the system":"Regular users can browse and purchase products"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",name:"phone",value:h.phone,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Information (Optional)"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),(0,t.jsx)("input",{type:"text",name:"address.street",value:(null==(e=h.address)?void 0:e.street)||"",onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter street address"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,t.jsx)("input",{type:"text",name:"address.city",value:(null==(s=h.address)?void 0:s.city)||"",onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter city"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),(0,t.jsx)("input",{type:"text",name:"address.state",value:(null==(r=h.address)?void 0:r.state)||"",onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter state or province"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP/Postal Code"}),(0,t.jsx)("input",{type:"text",name:"address.zipCode",value:(null==(l=h.address)?void 0:l.zipCode)||"",onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ZIP or postal code"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,t.jsx)("input",{type:"text",name:"address.country",value:(null==(u=h.address)?void 0:u.country)||"",onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter country"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,t.jsx)(d(),{href:"/admin/users",className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",disabled:x.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[x.isPending&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{children:x.isPending?"Creating...":"Create User"})]})]})]})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[375,112,960,615,441,684,358],()=>s(8323)),_N_E=e.O()}]);