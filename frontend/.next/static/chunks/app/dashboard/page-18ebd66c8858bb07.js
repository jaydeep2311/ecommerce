(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{7473:(e,s,t)=>{"use strict";t.d(s,{c:()=>r});var a=t(5558);let r={createOrder:async e=>(await a.Ay.post("/orders",e)).data,getMyOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;null!=a&&s.append(t,a.toString())}),(await a.Ay.get("/orders?".concat(s.toString()))).data},getOrder:async e=>(await a.Ay.get("/orders/".concat(e))).data,cancelOrder:async(e,s)=>(await a.Ay.put("/orders/".concat(e,"/cancel"),s)).data,getAllOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;null!=a&&s.append(t,a.toString())}),(await a.Ay.get("/orders/admin/all?".concat(s.toString()))).data},updateOrderStatus:async(e,s)=>(await a.Ay.put("/orders/".concat(e,"/status"),s)).data,getUserOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.getMyOrders(e)}}},8927:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(5155),r=t(2115),l=t(6874),d=t.n(l),n=t(4615),i=t(9053),c=t(2960),o=t(5558);let m={getDashboardAnalytics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;a&&s.append(t,a)}),(await o.Ay.get("/analytics/dashboard?".concat(s.toString()))).data},getSalesAnalytics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;a&&s.append(t,a)}),(await o.Ay.get("/analytics/sales?".concat(s.toString()))).data}};var x=t(7473);function h(){let e=()=>{let e=new Date,s=new Date;return s.setDate(s.getDate()-30),{startDate:s.toISOString().split("T")[0],endDate:e.toISOString().split("T")[0]}},[s,t]=(0,r.useState)(e()),l=()=>!s.startDate||!s.endDate||new Date(s.startDate)<=new Date(s.endDate),{data:o,isLoading:h}=(0,c.I)({queryKey:["admin","analytics","dashboard",s],queryFn:()=>{if(!l())throw Error("Start date cannot be after end date");return m.getDashboardAnalytics({startDate:s.startDate||void 0,endDate:s.endDate||void 0})},enabled:l()}),{data:g,isLoading:u}=(0,c.I)({queryKey:["admin","analytics","sales",s],queryFn:()=>{if(!l())throw Error("Start date cannot be after end date");return m.getSalesAnalytics({startDate:s.startDate||void 0,endDate:s.endDate||void 0,period:"daily"})},enabled:l()}),{data:j,isLoading:v}=(0,c.I)({queryKey:["admin","orders","all",s],queryFn:()=>{if(!l())throw Error("Start date cannot be after end date");return x.c.getAllOrders({startDate:s.startDate||void 0,endDate:s.endDate||void 0,limit:15,page:1})},enabled:l()}),p=null==o?void 0:o.data,N=null==g?void 0:g.data,b=(null==j?void 0:j.data)||[];return(0,a.jsx)(i.A,{requireAdmin:!0,children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(n.A,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Date Range Filter"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-end space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:s.startDate,onChange:e=>t(s=>({...s,startDate:e.target.value})),className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(l()?"border-gray-300 focus:ring-blue-500":"border-red-300 focus:ring-red-500")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,a.jsx)("input",{type:"date",value:s.endDate,onChange:e=>t(s=>({...s,endDate:e.target.value})),className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(l()?"border-gray-300 focus:ring-blue-500":"border-red-300 focus:ring-red-500")})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>t(e()),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Last 30 Days"}),(0,a.jsx)("button",{onClick:()=>t({startDate:"",endDate:""}),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"All Time"})]})]}),!l()&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,a.jsx)("span",{className:"text-sm text-red-600",children:"Start date cannot be after end date. Please adjust your date range."})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(d(),{href:"/products/add",className:"bg-blue-600 text-white p-6 rounded-lg hover:bg-blue-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Add Product"}),(0,a.jsx)("p",{className:"text-blue-100",children:"Create new product"})]})]})}),(0,a.jsx)(d(),{href:"/products/manage",className:"bg-green-600 text-white p-6 rounded-lg hover:bg-green-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Manage Products"}),(0,a.jsx)("p",{className:"text-green-100",children:"Edit & delete products"})]})]})}),(0,a.jsx)(d(),{href:"/orders/manage",className:"bg-purple-600 text-white p-6 rounded-lg hover:bg-purple-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Manage Orders"}),(0,a.jsx)("p",{className:"text-purple-100",children:"View & update orders"})]})]})}),(0,a.jsx)(d(),{href:"/users/manage",className:"bg-orange-600 text-white p-6 rounded-lg hover:bg-orange-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Manage Users"}),(0,a.jsx)("p",{className:"text-orange-100",children:"View & manage users"})]})]})})]}),h?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-gray-200 w-12 h-12"}),(0,a.jsxs)("div",{className:"ml-4 flex-1",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16"})]})]})},s))}):p?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.overview.totalOrders})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",p.overview.totalRevenue.toFixed(2)]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-purple-100",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.overview.totalProducts})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Stock Alerts"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.stockAlerts.length})]})]})})]}):null,(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Sales Report"}),u||v?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-16 bg-gray-200 rounded"},s))})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Sales Trends"}),N&&N.salesTrends.length>0?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Orders Overview"}),(0,a.jsx)("div",{className:"space-y-3",children:N.salesTrends.slice(0,7).map((e,s)=>{let t=new Date(e._id.year,(e._id.month||1)-1,e._id.day||1),r=Math.max(...N.salesTrends.map(e=>e.orders)),l=Math.round(.85*e.orders);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:[e.orders," orders"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-blue-600 w-12",children:"Total"}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(r>0?e.orders/r*100:0,"%")}})}),(0,a.jsx)("span",{className:"text-xs text-gray-600 w-8",children:e.orders})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-green-600 w-12",children:"Paid"}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(r>0?l/r*100:0,"%")}})}),(0,a.jsx)("span",{className:"text-xs text-gray-600 w-8",children:l})]})]})]},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Revenue Trends"}),(0,a.jsx)("div",{className:"space-y-2",children:N.salesTrends.slice(0,7).map((e,s)=>{let t=new Date(e._id.year,(e._id.month||1)-1,e._id.day||1),r=Math.max(...N.salesTrends.map(e=>e.revenue));return(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600 w-16",children:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-3 rounded-full",style:{width:"".concat(r>0?e.revenue/r*100:0,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-900 font-medium w-16",children:["$",e.revenue.toFixed(0)]})]},s)})})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"No sales data available for this period"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"All Orders"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Orders from all customers"})]}),(0,a.jsx)(d(),{href:"/orders/manage",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage All →"})]}),b.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[b.map(e=>{var s,t,r,l,d,n;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:["#",e.orderNumber]}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("delivered"===e.status?"bg-green-100 text-green-800":"shipped"===e.status?"bg-blue-100 text-blue-800":"processing"===e.status?"bg-yellow-100 text-yellow-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(null==(s=e.user)?void 0:s.name)||"Unknown User"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 0h6m-6 0l-1 12a2 2 0 002 2h6a2 2 0 002-2L15 7"})}),e.items.length," item(s)"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 0h6m-6 0l-1 12a2 2 0 002 2h6a2 2 0 002-2L15 7"})}),new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-lg text-gray-900",children:["$",e.pricing.total.toFixed(2)]}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((null==(t=e.paymentInfo)?void 0:t.status)==="paid"?"bg-green-100 text-green-700":(null==(r=e.paymentInfo)?void 0:r.status)==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:(null==(l=e.paymentInfo)?void 0:l.status)==="paid"?"\uD83D\uDCB3 Paid":(null==(d=e.paymentInfo)?void 0:d.status)==="pending"?"⏳ Pending":"❌ Unpaid"})]})]}),e.items.length>0&&(0,a.jsx)("div",{className:"border-t border-gray-100 pt-2 mt-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.items.slice(0,2).map(e=>e.name).join(", "),e.items.length>2&&" +".concat(e.items.length-2," more")]}),(0,a.jsx)("span",{children:(null==(n=e.user)?void 0:n.email)||"No email"})]})})]},e._id)}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-3 mt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Showing ",b.length," recent orders from all customers"]}),(0,a.jsxs)("span",{children:["Total Value: $",b.reduce((e,s)=>e+s.pricing.total,0).toFixed(2)]})]})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"No orders found"}),(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"No orders from any customers found for this period"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting the date range or check if there are any orders in the system"})]})]})]})]}),p&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Orders by Status"}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(p.ordersByStatus).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"capitalize text-gray-700",children:s.replace("_"," ")}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(p.overview.totalOrders>0?t.count/p.overview.totalOrders*100:0,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8",children:t.count})]})]},s)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Activities"}),(0,a.jsx)(d(),{href:"/orders/manage",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All →"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[p.recentActivities.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:["#",e.orderNumber]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.user.name," - ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:["$",e.pricing.total.toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs px-2 py-1 rounded-full ".concat("delivered"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]},e._id)),0===p.recentActivities.length&&(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent activities"})]})]})]})]})]})})}},9053:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var a=t(5155),r=t(2115),l=t(5695),d=t(5159);function n(e){let{children:s,requireAuth:t=!0,requireAdmin:n=!1,redirectTo:i="/auth/login"}=e,{isAuthenticated:c,isAdmin:o}=(0,d.As)(),m=(0,l.useRouter)();return((0,r.useEffect)(()=>t&&!c?void m.push(i):n&&!o?void m.push("/"):void 0,[c,o,t,n,m,i]),t&&!c)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):n&&!o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You dont have permission to access this page."})]})}):(0,a.jsx)(a.Fragment,{children:s})}},9824:(e,s,t)=>{Promise.resolve().then(t.bind(t,8927))}},e=>{var s=s=>e(e.s=s);e.O(0,[375,112,960,615,441,684,358],()=>s(9824)),_N_E=e.O()}]);