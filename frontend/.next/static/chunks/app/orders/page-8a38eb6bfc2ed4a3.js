(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{835:(e,s,t)=>{Promise.resolve().then(t.bind(t,5804))},5804:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),r=t(2115),d=t(6874),n=t.n(d),i=t(4615),l=t(9053),c=t(2960),o=t(7473);function x(){let[e,s]=(0,r.useState)({page:1,limit:10}),{data:t,isLoading:d,error:x}=(0,c.I)({queryKey:["orders",e],queryFn:()=>o.c.getMyOrders(e)}),m=e=>{s(s=>({...s,...e,page:1}))},h=e=>{s(s=>({...s,page:e}))},g=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"processing":return"bg-purple-100 text-purple-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsx)(l.A,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(i.A,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Orders"})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:e.status||"",onChange:e=>m({status:e.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Orders"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,a.jsx)("option",{value:"processing",children:"Processing"}),(0,a.jsx)("option",{value:"shipped",children:"Shipped"}),(0,a.jsx)("option",{value:"delivered",children:"Delivered"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{onClick:()=>s({page:1,limit:10}),className:"bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Clear Filters"})})]}),d&&(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-6 bg-gray-300 rounded w-20"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/3"})]})]},s))}),x&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-red-600",children:"Failed to load orders. Please try again."})}),t&&t.data.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-4",children:t.data.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",e.orderNumber]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(g(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-900",children:["$",e.pricing.total.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-2",children:["Items (",e.items.length,")"]}),(0,a.jsxs)("div",{className:"space-y-1",children:[e.items.slice(0,3).map((e,s)=>(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.name," \xd7 ",e.quantity]},s)),e.items.length>3&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["+",e.items.length-3," more items"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Shipping Address"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("p",{children:e.shippingAddress.fullName}),(0,a.jsx)("p",{children:e.shippingAddress.street}),(0,a.jsxs)("p",{children:[e.shippingAddress.city,", ",e.shippingAddress.state," ",e.shippingAddress.zipCode]}),(0,a.jsx)("p",{children:e.shippingAddress.country})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Payment: ",e.paymentInfo.method.replace("_"," ").toUpperCase()]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(n(),{href:"/orders/".concat(e._id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"View Details"}),e.canBeCancelled&&(0,a.jsx)(n(),{href:"/orders/".concat(e._id,"?action=cancel"),className:"text-red-600 hover:text-red-800 font-medium",children:"Cancel Order"})]})]})]},e._id))}),t.pagination&&(0,a.jsx)("div",{className:"flex justify-center mt-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t.pagination.prev&&(0,a.jsx)("button",{onClick:()=>h(t.pagination.prev.page),className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 py-2 bg-blue-600 text-white rounded-md",children:["Page ",e.page]}),t.pagination.next&&(0,a.jsx)("button",{onClick:()=>h(t.pagination.next.page),className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Next"})]})})]}),t&&0===t.data.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No orders found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"You havent placed any orders yet"}),(0,a.jsx)(n(),{href:"/products",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Start Shopping"})]})]})]})})}},7473:(e,s,t)=>{"use strict";t.d(s,{c:()=>r});var a=t(5558);let r={createOrder:async e=>(await a.Ay.post("/orders",e)).data,getMyOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;null!=a&&s.append(t,a.toString())}),(await a.Ay.get("/orders?".concat(s.toString()))).data},getOrder:async e=>(await a.Ay.get("/orders/".concat(e))).data,cancelOrder:async(e,s)=>(await a.Ay.put("/orders/".concat(e,"/cancel"),s)).data,getAllOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;null!=a&&s.append(t,a.toString())}),(await a.Ay.get("/orders/admin/all?".concat(s.toString()))).data},updateOrderStatus:async(e,s)=>(await a.Ay.put("/orders/".concat(e,"/status"),s)).data,getUserOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.getMyOrders(e)}}},9053:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(5155),r=t(2115),d=t(5695),n=t(5159);function i(e){let{children:s,requireAuth:t=!0,requireAdmin:i=!1,redirectTo:l="/auth/login"}=e,{isAuthenticated:c,isAdmin:o}=(0,n.As)(),x=(0,d.useRouter)();return((0,r.useEffect)(()=>t&&!c?void x.push(l):i&&!o?void x.push("/"):void 0,[c,o,t,i,x,l]),t&&!c)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):i&&!o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You dont have permission to access this page."})]})}):(0,a.jsx)(a.Fragment,{children:s})}}},e=>{var s=s=>e(e.s=s);e.O(0,[375,112,960,615,441,684,358],()=>s(835)),_N_E=e.O()}]);