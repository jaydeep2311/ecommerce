(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[424],{2554:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(5155),a=s(5695),i=s(9694),n=s(7129),o=s(4615),l=s(9053),d=s(2960),c=s(8884),u=s(8008);let m=n.Ik().shape({name:n.Yj().min(2,"Product name must be at least 2 characters").max(200,"Product name must be less than 200 characters").required("Product name is required"),description:n.Yj().min(10,"Description must be at least 10 characters").max(2e3,"Description must be less than 2000 characters").required("Description is required"),price:n.ai().min(.01,"Price must be greater than 0").max(999999,"Price must be less than 999,999").required("Price is required"),originalPrice:n.ai().min(0,"Original price must be greater than or equal to 0").optional(),category:n.Yj().required("Category is required"),stock:n.ai().min(0,"Stock must be greater than or equal to 0").required("Stock is required"),images:n.YO().of(n.Ik().shape({url:n.Yj().url("Must be a valid URL").required("Image URL is required"),alt:n.Yj().optional(),isPrimary:n.zM().optional()})).min(1,"At least one image is required")}),x=["Electronics","Clothing","Books","Home & Garden","Sports & Outdoors","Health & Beauty","Toys & Games","Automotive","Food & Beverages","Other"];function h(){var e,t,s,n,h,g,p,y,b,v,j,f,N,w,k;let P=(0,a.useParams)(),S=(0,a.useRouter)(),A=null!=(k=null==P?void 0:P.id)?k:"",{data:F,isLoading:q,error:K}=(0,d.I)({queryKey:["products",A],queryFn:()=>{var e;return c.Z.getProduct(null!=(e=null==A?void 0:A.toString())?e:"")},enabled:!!A}),D=(0,u.CC)();if(q)return(0,r.jsx)(l.A,{requireAdmin:!0,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-8"}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsx)("div",{className:"space-y-6",children:[...Array(8)].map((e,t)=>(0,r.jsx)("div",{className:"h-12 bg-gray-300 rounded"},t))})})]})})]})});if(K||!F)return(0,r.jsx)(l.A,{requireAdmin:!0,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"The product youre trying to edit doesnt exist."}),(0,r.jsx)("button",{onClick:()=>S.push("/products/manage"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Products"})]})})]})});let E=F.data;return(0,r.jsx)(l.A,{requireAdmin:!0,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.A,{}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Product"}),(0,r.jsx)("button",{onClick:()=>S.back(),className:"text-gray-600 hover:text-gray-800",children:"â† Back"})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsx)(i.l1,{initialValues:{name:E.name||"",description:E.description||"",price:(null==(e=E.price)?void 0:e.toString())||"",originalPrice:(null==(t=E.originalPrice)?void 0:t.toString())||"",category:E.category||"",subcategory:E.subcategory||"",brand:E.brand||"",sku:E.sku||"",stock:(null==(s=E.stock)?void 0:s.toString())||"",lowStockThreshold:(null==(n=E.lowStockThreshold)?void 0:n.toString())||"5",weight:(null==(h=E.weight)?void 0:h.toString())||"",dimensions:{length:(null==(p=E.dimensions)||null==(g=p.length)?void 0:g.toString())||"",width:(null==(b=E.dimensions)||null==(y=b.width)?void 0:y.toString())||"",height:(null==(j=E.dimensions)||null==(v=j.height)?void 0:v.toString())||""},images:(null==(f=E.images)?void 0:f.length)>0?E.images:[{url:"",alt:"",isPrimary:!0}],tags:(null==(N=E.tags)?void 0:N.length)>0?E.tags:[""],features:(null==(w=E.features)?void 0:w.length)>0?E.features:[""],specifications:E.specifications||{},isFeatured:E.isFeatured||!1,isActive:!1!==E.isActive},validationSchema:m,onSubmit:(e,t)=>{var s;let{setSubmitting:r}=t,a={length:e.dimensions.length?parseFloat(e.dimensions.length):void 0,width:e.dimensions.width?parseFloat(e.dimensions.width):void 0,height:e.dimensions.height?parseFloat(e.dimensions.height):void 0},i=a.length||a.width||a.height,{dimensions:n,...o}=e,l={...o,price:parseFloat(e.price),originalPrice:e.originalPrice?parseFloat(e.originalPrice):void 0,stock:parseInt(e.stock),lowStockThreshold:e.lowStockThreshold?parseInt(e.lowStockThreshold):void 0,weight:e.weight?parseFloat(e.weight):void 0,...i&&{dimensions:a},tags:e.tags.filter(e=>""!==e.trim()),features:e.features.filter(e=>""!==e.trim()),images:e.images.filter(e=>""!==e.url.trim())};D.mutate({id:null!=(s=null==A?void 0:A.toString())?s:"",data:l},{onSuccess:()=>{r(!1),S.push("/products/manage")},onError:()=>r(!1)})},children:e=>{let{values:t,isSubmitting:s,setFieldValue:a}=e;return(0,r.jsxs)(i.lV,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Basic Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,r.jsx)(i.D0,{id:"name",name:"name",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"name",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,r.jsxs)(i.D0,{as:"select",id:"category",name:"category",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),x.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)(i.Kw,{name:"category",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),(0,r.jsx)(i.D0,{id:"brand",name:"brand",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"brand",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),(0,r.jsx)(i.D0,{id:"sku",name:"sku",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"sku",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,r.jsx)(i.D0,{as:"textarea",id:"description",name:"description",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"description",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Pricing"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),(0,r.jsx)(i.D0,{id:"price",name:"price",type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"price",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"originalPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price (for discounts)"}),(0,r.jsx)(i.D0,{id:"originalPrice",name:"originalPrice",type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"originalPrice",component:"div",className:"mt-1 text-sm text-red-600"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Inventory"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity *"}),(0,r.jsx)(i.D0,{id:"stock",name:"stock",type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"stock",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Stock Threshold"}),(0,r.jsx)(i.D0,{id:"lowStockThreshold",name:"lowStockThreshold",type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"lowStockThreshold",component:"div",className:"mt-1 text-sm text-red-600"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Product Images"}),(0,r.jsx)(i.ED,{name:"images",children:e=>{let{push:s,remove:n}=e;return(0,r.jsxs)("div",{className:"space-y-4",children:[t.images.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-md",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(i.D0,{name:"images.".concat(s,".url"),type:"url",placeholder:"Image URL",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"images.".concat(s,".url"),component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsx)("div",{className:"w-32",children:(0,r.jsx)(i.D0,{name:"images.".concat(s,".alt"),type:"text",placeholder:"Alt text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i.D0,{name:"images.".concat(s,".isPrimary"),type:"checkbox",className:"mr-2",onChange:e=>{e.target.checked&&t.images.forEach((e,t)=>{t!==s&&a("images.".concat(t,".isPrimary"),!1)}),a("images.".concat(s,".isPrimary"),e.target.checked)}}),(0,r.jsx)("label",{className:"text-sm",children:"Primary"})]}),t.images.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>n(s),className:"text-red-600 hover:text-red-800",children:"Remove"})]},s)),(0,r.jsx)("button",{type:"button",onClick:()=>s({url:"",alt:"",isPrimary:!1}),className:"text-blue-600 hover:text-blue-800",children:"+ Add Another Image"})]})}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Features"}),(0,r.jsx)(i.ED,{name:"features",children:e=>{let{push:s,remove:a}=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[t.features.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.D0,{name:"features.".concat(s),type:"text",placeholder:"Product feature",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.features.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>a(s),className:"text-red-600 hover:text-red-800",children:"Remove"})]},s)),(0,r.jsx)("button",{type:"button",onClick:()=>s(""),className:"text-blue-600 hover:text-blue-800",children:"+ Add Feature"})]})}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i.D0,{name:"isFeatured",type:"checkbox",className:"mr-2"}),(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Featured Product"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i.D0,{name:"isActive",type:"checkbox",className:"mr-2"}),(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Active (visible to customers)"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>S.back(),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:s||D.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s||D.isPending?"Updating...":"Update Product"})]})]})}})})]})]})})}},7395:(e,t,s)=>{Promise.resolve().then(s.bind(s,2554))},8008:(e,t,s)=>{"use strict";s.d(t,{CC:()=>l,HT:()=>u,Pg:()=>o,W$:()=>d,_T:()=>c});var r=s(6715),a=s(5041),i=s(8884),n=s(3568);let o=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:i.Z.createProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),n.oR.success("Product created successfully!")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to create product";n.oR.error(r)}})},l=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:e=>{let{id:t,data:s}=e;return i.Z.updateProduct(t,s)},onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["products",s.id]}),e.invalidateQueries({queryKey:["admin","products"]}),n.oR.success("Product updated successfully!")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to update product";n.oR.error(r)}})},d=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:i.Z.deleteProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),n.oR.success("Product deleted successfully")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to delete product";n.oR.error(r)}})},c=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:e=>{let{productId:t,data:s}=e;return i.Z.addReview(t,s)},onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["products",s.productId]}),e.invalidateQueries({queryKey:["products"]}),n.oR.success("Review added successfully!")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to add review";n.oR.error(r)}})},u=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:i.Z.restoreProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),e.invalidateQueries({queryKey:["admin","deleted-products"]}),n.oR.success("Product restored successfully!")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to restore product";n.oR.error(r)}})}},8884:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(5558);let a={getProducts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&(Array.isArray(r)?r.forEach(e=>t.append(s,e.toString())):t.append(s,r.toString()))}),(await r.Ay.get("/products?".concat(t.toString()))).data},getProduct:async e=>(await r.Ay.get("/products/".concat(e))).data,createProduct:async e=>(await r.Ay.post("/products",e)).data,updateProduct:async(e,t)=>(await r.Ay.put("/products/".concat(e),t)).data,deleteProduct:async e=>(await r.Ay.delete("/products/".concat(e))).data,getCategories:async()=>(await r.Ay.get("/products/categories")).data,getBrands:async()=>(await r.Ay.get("/products/brands")).data,getFeaturedProducts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return(await r.Ay.get("/products?featured=true&limit=".concat(e))).data},getRelatedProducts:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return(await r.Ay.get("/products?category=".concat(e,"&limit=").concat(s,"&exclude=").concat(t))).data},addReview:async(e,t)=>(await r.Ay.post("/products/".concat(e,"/reviews"),t)).data,restoreProduct:async e=>(await r.Ay.put("/products/".concat(e,"/restore"))).data,getDeletedProducts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.Ay.get("/products/deleted/all",{params:e})).data}}},9053:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(5155),a=s(2115),i=s(5695),n=s(5159);function o(e){let{children:t,requireAuth:s=!0,requireAdmin:o=!1,redirectTo:l="/auth/login"}=e,{isAuthenticated:d,isAdmin:c}=(0,n.As)(),u=(0,i.useRouter)();return((0,a.useEffect)(()=>s&&!d?void u.push(l):o&&!c?void u.push("/"):void 0,[d,c,s,o,u,l]),s&&!d)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):o&&!c?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You dont have permission to access this page."})]})}):(0,r.jsx)(r.Fragment,{children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[375,112,960,508,615,441,684,358],()=>t(7395)),_N_E=e.O()}]);