(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{1153:(e,s,t)=>{Promise.resolve().then(t.bind(t,6049))},6049:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(5155),a=t(2115),l=t(5695),i=t(6766),d=t(6874),n=t.n(d),c=t(4615),o=t(4295),m=t(9694),x=t(7129),u=t(5159),h=t(8008),g=t(3303),j=t(3568);let b=x.Ik().shape({rating:x.ai().min(1,"Please select a rating").max(5,"Rating cannot be more than 5").required("Rating is required"),comment:x.Yj().max(500,"Comment cannot be more than 500 characters").optional()}),p=e=>{let{review:s}=e;return(0,r.jsx)("div",{className:"border-b border-gray-200 pb-6 mb-6 last:border-b-0",children:(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:s.user.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:s.user.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(g.A,{rating:s.rating,readonly:!0}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]})]})}),s.comment&&(0,r.jsx)("p",{className:"text-gray-700 mt-2",children:s.comment})]})]})})};function v(e){let{productId:s,reviews:t,averageRating:l,totalReviews:i,userHasReviewed:d=!1}=e,{isAuthenticated:n,user:c}=(0,u.As)(),[o,x]=(0,a.useState)(!1),v=(0,h._T)(),y=t.find(e=>e.user._id===(null==c?void 0:c._id)),N=d||!!y;return(0,r.jsx)("div",{className:"mt-12",children:(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customer Reviews"}),(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-gray-900",children:l.toFixed(1)}),(0,r.jsx)(g.A,{rating:l,readonly:!0,size:"lg"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Based on ",i," review",1!==i?"s":""]})]})}),n&&!N&&(0,r.jsx)("button",{onClick:()=>x(!o),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Write a Review"}),!n&&(0,r.jsx)("p",{className:"text-gray-600",children:"Please login to write a review"}),N&&(0,r.jsx)("p",{className:"text-green-600",children:"You have already reviewed this product"})]})}),o&&n&&!N&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-8",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Write Your Review"}),(0,r.jsx)(m.l1,{initialValues:{rating:0,comment:""},validationSchema:b,onSubmit:(e,t)=>{let{setSubmitting:r,resetForm:a}=t;v.mutate({productId:s,data:e},{onSuccess:()=>{a(),x(!1),j.oR.success("Review added successfully!")},onSettled:()=>r(!1)})},children:e=>{let{values:s,setFieldValue:t,isSubmitting:a}=e;return(0,r.jsxs)(m.lV,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating *"}),(0,r.jsx)(g.A,{rating:s.rating,onRatingChange:e=>t("rating",e),size:"lg"}),(0,r.jsx)(m.Kw,{name:"rating",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comment (Optional)"}),(0,r.jsx)(m.D0,{as:"textarea",id:"comment",name:"comment",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Share your experience with this product..."}),(0,r.jsx)(m.Kw,{name:"comment",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"submit",disabled:a||v.isPending,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a||v.isPending?"Submitting...":"Submit Review"}),(0,r.jsx)("button",{type:"button",onClick:()=>x(!1),className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}})]}),(0,r.jsx)("div",{children:t.length>0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold mb-6",children:["All Reviews (",t.length,")"]}),t.map((e,s)=>(0,r.jsx)(p,{review:e},s))]}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No reviews yet. Be the first to review this product!"})})})]})})}var y=t(6500),N=t(2250);function f(){var e,s,t;let d=(0,l.useParams)(),m=null!=(e=null==d?void 0:d.id)?e:"",[x,h]=(0,a.useState)(0),[b,p]=(0,a.useState)(1),{data:f,isLoading:w,error:k}=(0,y.Bj)(null!=(s=null==m?void 0:m.toString())?s:""),R=null==f?void 0:f.data,{data:P}=(0,y.DS)((null==R?void 0:R.category)||"",null!=(t=null==m?void 0:m.toString())?t:"",4),{isAuthenticated:S,isAdmin:_}=(0,u.As)(),C=(0,N.AP)();return w?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(c.A,{}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsx)("div",{className:"animate-pulse",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{className:"h-96 bg-gray-300 rounded"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-300 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded w-2/3"}),(0,r.jsx)("div",{className:"h-6 bg-gray-300 rounded w-1/3"}),(0,r.jsx)("div",{className:"h-20 bg-gray-300 rounded"})]})]})})})]}):k||!R?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(c.A,{}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"The product youre looking for doesnt exist."}),(0,r.jsx)(n(),{href:"/products",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Products"})]})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("nav",{className:"mb-8",children:(0,r.jsxs)("ol",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/",className:"hover:text-blue-600",children:"Home"})}),(0,r.jsx)("li",{children:"/"}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/products",className:"hover:text-blue-600",children:"Products"})}),(0,r.jsx)("li",{children:"/"}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/products?category=".concat(R.category),className:"hover:text-blue-600",children:R.category})}),(0,r.jsx)("li",{children:"/"}),(0,r.jsx)("li",{className:"text-gray-900",children:R.name})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("div",{className:"relative h-96 w-full",children:R.images[x]?(0,r.jsx)(i.default,{src:R.images[x].url,alt:R.images[x].alt||R.name,fill:!0,className:"object-cover rounded-lg"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400",children:"No Image"})})})}),R.images.length>1&&(0,r.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:R.images.map((e,s)=>(0,r.jsx)("button",{onClick:()=>h(s),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 ".concat(x===s?"border-blue-600":"border-gray-300"),children:(0,r.jsx)(i.default,{src:e.url,alt:e.alt||R.name,width:80,height:80,className:"object-cover w-full h-full"})},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:R.name}),R.brand&&(0,r.jsxs)("p",{className:"text-lg text-gray-600 mb-4",children:["by ",R.brand]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(g.A,{rating:R.rating.average,readonly:!0,size:"md",showValue:!0,totalReviews:R.rating.count})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["$",R.price.toFixed(2)]}),R.originalPrice&&R.originalPrice>R.price&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-xl text-gray-500 line-through",children:["$",R.originalPrice.toFixed(2)]}),(0,r.jsxs)("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium",children:[R.discountPercentage,"% OFF"]})]})]})}),(0,r.jsxs)("div",{className:"mb-6",children:["in_stock"===R.stockStatus&&(0,r.jsxs)("span",{className:"text-green-600 font-medium",children:["✓ In Stock (",R.stock," available)"]}),"low_stock"===R.stockStatus&&(0,r.jsxs)("span",{className:"text-orange-600 font-medium",children:["⚠ Low Stock (",R.stock," left)"]}),"out_of_stock"===R.stockStatus&&(0,r.jsx)("span",{className:"text-red-600 font-medium",children:"✗ Out of Stock"})]}),"out_of_stock"!==R.stockStatus&&!_&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-md",children:[(0,r.jsx)("button",{onClick:()=>p(Math.max(1,b-1)),className:"px-3 py-2 hover:bg-gray-100",children:"-"}),(0,r.jsx)("span",{className:"px-4 py-2 border-x border-gray-300",children:b}),(0,r.jsx)("button",{onClick:()=>p(Math.min(R.stock,b+1)),className:"px-3 py-2 hover:bg-gray-100",children:"+"})]})]}),(0,r.jsx)("button",{onClick:()=>{if(!S)return void j.oR.error("Please login to add items to cart");if(_)return void j.oR.error("Cart functionality is not available for admin users");if(R){if(0===R.stock)return void j.oR.error("Product is out of stock");if(b>R.stock)return void j.oR.error("Only ".concat(R.stock," items available"));C.mutate({productId:R._id,quantity:b})}},disabled:C.isPending,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C.isPending?"Adding to Cart...":"Add to Cart"})]}),_&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(n(),{href:"/products/manage?edit=".concat(R._id),className:"flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-gray-700 transition-colors text-center",children:"Edit Product"}),(0,r.jsx)(n(),{href:"/products/add",className:"flex-1 bg-green-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-green-700 transition-colors text-center",children:"Add New Product"})]})}),R.features&&R.features.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Key Features"}),(0,r.jsx)("ul",{className:"space-y-2",children:R.features.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-blue-600 mr-2",children:"•"}),(0,r.jsx)("span",{className:"text-gray-700",children:e})]},s))})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Description"}),(0,r.jsx)("div",{className:"prose max-w-none",children:(0,r.jsx)("p",{className:"text-gray-700 leading-relaxed",children:R.description})})]}),R.specifications&&Object.keys(R.specifications).length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Specifications"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(R.specifications).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-700",children:[s,":"]}),(0,r.jsx)("span",{className:"text-gray-600",children:t})]},s)})})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:(0,r.jsx)(v,{productId:R._id,reviews:R.reviews,averageRating:R.rating.average,totalReviews:R.rating.count})}),P&&P.data.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Related Products"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:P.data.map(e=>(0,r.jsx)(o.A,{product:e},e._id))})]})]})]})}},8008:(e,s,t)=>{"use strict";t.d(s,{CC:()=>n,HT:()=>m,Pg:()=>d,W$:()=>c,_T:()=>o});var r=t(6715),a=t(5041),l=t(8884),i=t(3568);let d=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:l.Z.createProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),i.oR.success("Product created successfully!")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to create product";i.oR.error(r)}})},n=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:e=>{let{id:s,data:t}=e;return l.Z.updateProduct(s,t)},onSuccess:(s,t)=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["products",t.id]}),e.invalidateQueries({queryKey:["admin","products"]}),i.oR.success("Product updated successfully!")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to update product";i.oR.error(r)}})},c=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:l.Z.deleteProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),i.oR.success("Product deleted successfully")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to delete product";i.oR.error(r)}})},o=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:e=>{let{productId:s,data:t}=e;return l.Z.addReview(s,t)},onSuccess:(s,t)=>{e.invalidateQueries({queryKey:["products",t.productId]}),e.invalidateQueries({queryKey:["products"]}),i.oR.success("Review added successfully!")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to add review";i.oR.error(r)}})},m=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:l.Z.restoreProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),e.invalidateQueries({queryKey:["admin","deleted-products"]}),i.oR.success("Product restored successfully!")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to restore product";i.oR.error(r)}})}}},e=>{var s=s=>e(e.s=s);e.O(0,[375,112,960,508,766,615,902,441,684,358],()=>s(1153)),_N_E=e.O()}]);