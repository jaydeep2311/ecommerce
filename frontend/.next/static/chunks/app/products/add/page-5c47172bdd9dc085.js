(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{4913:(e,s,t)=>{Promise.resolve().then(t.bind(t,9241))},8008:(e,s,t)=>{"use strict";t.d(s,{CC:()=>d,HT:()=>m,Pg:()=>o,W$:()=>l,_T:()=>c});var r=t(6715),a=t(5041),i=t(8884),n=t(3568);let o=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:i.Z.createProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),n.oR.success("Product created successfully!")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to create product";n.oR.error(r)}})},d=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:e=>{let{id:s,data:t}=e;return i.Z.updateProduct(s,t)},onSuccess:(s,t)=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["products",t.id]}),e.invalidateQueries({queryKey:["admin","products"]}),n.oR.success("Product updated successfully!")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to update product";n.oR.error(r)}})},l=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:i.Z.deleteProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),n.oR.success("Product deleted successfully")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to delete product";n.oR.error(r)}})},c=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:e=>{let{productId:s,data:t}=e;return i.Z.addReview(s,t)},onSuccess:(s,t)=>{e.invalidateQueries({queryKey:["products",t.productId]}),e.invalidateQueries({queryKey:["products"]}),n.oR.success("Review added successfully!")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to add review";n.oR.error(r)}})},m=()=>{let e=(0,r.jE)();return(0,a.n)({mutationFn:i.Z.restoreProduct,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["admin","products"]}),e.invalidateQueries({queryKey:["admin","deleted-products"]}),n.oR.success("Product restored successfully!")},onError:e=>{var s,t;let r=(null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to restore product";n.oR.error(r)}})}},8884:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(5558);let a={getProducts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,r]=e;null!=r&&(Array.isArray(r)?r.forEach(e=>s.append(t,e.toString())):s.append(t,r.toString()))}),(await r.Ay.get("/products?".concat(s.toString()))).data},getProduct:async e=>(await r.Ay.get("/products/".concat(e))).data,createProduct:async e=>(await r.Ay.post("/products",e)).data,updateProduct:async(e,s)=>(await r.Ay.put("/products/".concat(e),s)).data,deleteProduct:async e=>(await r.Ay.delete("/products/".concat(e))).data,getCategories:async()=>(await r.Ay.get("/products/categories")).data,getBrands:async()=>(await r.Ay.get("/products/brands")).data,getFeaturedProducts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return(await r.Ay.get("/products?featured=true&limit=".concat(e))).data},getRelatedProducts:async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return(await r.Ay.get("/products?category=".concat(e,"&limit=").concat(t,"&exclude=").concat(s))).data},addReview:async(e,s)=>(await r.Ay.post("/products/".concat(e,"/reviews"),s)).data,restoreProduct:async e=>(await r.Ay.put("/products/".concat(e,"/restore"))).data,getDeletedProducts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.Ay.get("/products/deleted/all",{params:e})).data}}},9053:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var r=t(5155),a=t(2115),i=t(5695),n=t(5159);function o(e){let{children:s,requireAuth:t=!0,requireAdmin:o=!1,redirectTo:d="/auth/login"}=e,{isAuthenticated:l,isAdmin:c}=(0,n.As)(),m=(0,i.useRouter)();return((0,a.useEffect)(()=>t&&!l?void m.push(d):o&&!c?void m.push("/"):void 0,[l,c,t,o,m,d]),t&&!l)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):o&&!c?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You dont have permission to access this page."})]})}):(0,r.jsx)(r.Fragment,{children:s})}},9241:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),a=t(5695),i=t(9694),n=t(7129),o=t(4615),d=t(9053),l=t(8008);let c=n.Ik().shape({name:n.Yj().min(2,"Product name must be at least 2 characters").max(200,"Product name must be less than 200 characters").required("Product name is required"),description:n.Yj().min(10,"Description must be at least 10 characters").max(2e3,"Description must be less than 2000 characters").required("Description is required"),price:n.ai().min(.01,"Price must be greater than 0").max(999999,"Price must be less than 999,999").required("Price is required"),originalPrice:n.ai().min(0,"Original price must be greater than or equal to 0").optional(),category:n.Yj().required("Category is required"),stock:n.ai().min(0,"Stock must be greater than or equal to 0").required("Stock is required"),images:n.YO().of(n.Ik().shape({url:n.Yj().url("Must be a valid URL").required("Image URL is required"),alt:n.Yj().optional(),isPrimary:n.zM().optional()})).min(1,"At least one image is required")}),m=["Electronics","Clothing","Books","Home & Garden","Sports & Outdoors","Health & Beauty","Toys & Games","Automotive","Food & Beverages","Other"];function u(){let e=(0,a.useRouter)(),s=(0,l.Pg)();return(0,r.jsx)(d.A,{requireAdmin:!0,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.A,{}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Add New Product"}),(0,r.jsx)("button",{onClick:()=>e.back(),className:"text-gray-600 hover:text-gray-800",children:"← Back"})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsx)(i.l1,{initialValues:{name:"",description:"",price:"",originalPrice:"",category:"",subcategory:"",brand:"",sku:"",stock:"",lowStockThreshold:"5",weight:"",dimensions:{length:"",width:"",height:""},images:[{url:"",alt:"",isPrimary:!0}],tags:[""],features:[""],specifications:{},isFeatured:!1},validationSchema:c,onSubmit:(t,r)=>{let{setSubmitting:a}=r,i={length:t.dimensions.length?parseFloat(t.dimensions.length):void 0,width:t.dimensions.width?parseFloat(t.dimensions.width):void 0,height:t.dimensions.height?parseFloat(t.dimensions.height):void 0},n=i.length||i.width||i.height,{dimensions:o,...d}=t,l={...d,price:parseFloat(t.price),originalPrice:t.originalPrice?parseFloat(t.originalPrice):void 0,stock:parseInt(t.stock),lowStockThreshold:t.lowStockThreshold?parseInt(t.lowStockThreshold):void 0,weight:t.weight?parseFloat(t.weight):void 0,...n&&{dimensions:i},tags:t.tags.filter(e=>""!==e.trim()),features:t.features.filter(e=>""!==e.trim()),images:t.images.filter(e=>""!==e.url.trim())};s.mutate(l,{onSuccess:()=>{a(!1),e.push("/products/manage")},onError:()=>a(!1)})},children:t=>{let{values:a,isSubmitting:n,setFieldValue:o}=t;return(0,r.jsxs)(i.lV,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Basic Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,r.jsx)(i.D0,{id:"name",name:"name",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"name",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,r.jsxs)(i.D0,{as:"select",id:"category",name:"category",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),m.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)(i.Kw,{name:"category",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),(0,r.jsx)(i.D0,{id:"brand",name:"brand",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"brand",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),(0,r.jsx)(i.D0,{id:"sku",name:"sku",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"sku",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,r.jsx)(i.D0,{as:"textarea",id:"description",name:"description",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"description",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Pricing"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),(0,r.jsx)(i.D0,{id:"price",name:"price",type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"price",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"originalPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price (for discounts)"}),(0,r.jsx)(i.D0,{id:"originalPrice",name:"originalPrice",type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"originalPrice",component:"div",className:"mt-1 text-sm text-red-600"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Inventory"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity *"}),(0,r.jsx)(i.D0,{id:"stock",name:"stock",type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"stock",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Stock Threshold"}),(0,r.jsx)(i.D0,{id:"lowStockThreshold",name:"lowStockThreshold",type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"lowStockThreshold",component:"div",className:"mt-1 text-sm text-red-600"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Product Images"}),(0,r.jsx)(i.ED,{name:"images",children:e=>{let{push:s,remove:t}=e;return(0,r.jsxs)("div",{className:"space-y-4",children:[a.images.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-md",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(i.D0,{name:"images.".concat(s,".url"),type:"url",placeholder:"Image URL",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"images.".concat(s,".url"),component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsx)("div",{className:"w-32",children:(0,r.jsx)(i.D0,{name:"images.".concat(s,".alt"),type:"text",placeholder:"Alt text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i.D0,{name:"images.".concat(s,".isPrimary"),type:"checkbox",className:"mr-2",onChange:e=>{e.target.checked&&a.images.forEach((e,t)=>{t!==s&&o("images.".concat(t,".isPrimary"),!1)}),o("images.".concat(s,".isPrimary"),e.target.checked)}}),(0,r.jsx)("label",{className:"text-sm",children:"Primary"})]}),a.images.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>t(s),className:"text-red-600 hover:text-red-800",children:"Remove"})]},s)),(0,r.jsx)("button",{type:"button",onClick:()=>s({url:"",alt:"",isPrimary:!1}),className:"text-blue-600 hover:text-blue-800",children:"+ Add Another Image"})]})}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Physical Properties"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg)"}),(0,r.jsx)(i.D0,{id:"weight",name:"weight",type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"weight",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"subcategory",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategory"}),(0,r.jsx)(i.D0,{id:"subcategory",name:"subcategory",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"subcategory",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Dimensions (cm)"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dimensions.length",className:"block text-sm font-medium text-gray-700 mb-1",children:"Length"}),(0,r.jsx)(i.D0,{id:"dimensions.length",name:"dimensions.length",type:"number",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dimensions.width",className:"block text-sm font-medium text-gray-700 mb-1",children:"Width"}),(0,r.jsx)(i.D0,{id:"dimensions.width",name:"dimensions.width",type:"number",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dimensions.height",className:"block text-sm font-medium text-gray-700 mb-1",children:"Height"}),(0,r.jsx)(i.D0,{id:"dimensions.height",name:"dimensions.height",type:"number",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Features"}),(0,r.jsx)(i.ED,{name:"features",children:e=>{let{push:s,remove:t}=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[a.features.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.D0,{name:"features.".concat(s),type:"text",placeholder:"Product feature",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.features.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>t(s),className:"text-red-600 hover:text-red-800",children:"Remove"})]},s)),(0,r.jsx)("button",{type:"button",onClick:()=>s(""),className:"text-blue-600 hover:text-blue-800",children:"+ Add Feature"})]})}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Tags"}),(0,r.jsx)(i.ED,{name:"tags",children:e=>{let{push:s,remove:t}=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[a.tags.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.D0,{name:"tags.".concat(s),type:"text",placeholder:"Product tag",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.tags.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>t(s),className:"text-red-600 hover:text-red-800",children:"Remove"})]},s)),(0,r.jsx)("button",{type:"button",onClick:()=>s(""),className:"text-blue-600 hover:text-blue-800",children:"+ Add Tag"})]})}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i.D0,{name:"isFeatured",type:"checkbox",className:"mr-2"}),(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Featured Product"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Featured products will be highlighted on the homepage and in search results."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:n||s.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n||s.isPending?"Creating...":"Create Product"})]})]})}})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[375,112,960,508,615,441,684,358],()=>s(4913)),_N_E=e.O()}]);