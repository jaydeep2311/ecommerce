(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{1076:(e,s,r)=>{Promise.resolve().then(r.bind(r,3495))},3495:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(5155),l=r(2115),a=r(6874),d=r.n(a),n=r(4615),i=r(4542),c=r(5159),o=r(2960),x=r(7473);function m(){var e;let{user:s}=(0,c.As)(),[r,a]=(0,l.useState)("orders"),{data:m,isLoading:h}=(0,o.I)({queryKey:["orders","user"],queryFn:()=>x.c.getUserOrders()}),u=(null==m?void 0:m.data)||[],g=u.length,j=u.reduce((e,s)=>e+s.pricing.total,0),p=u.filter(e=>"pending"===e.status).length,b=u.filter(e=>"processing"===e.status).length,N=u.filter(e=>"shipped"===e.status).length,f=u.filter(e=>"delivered"===e.status).length,v=u.filter(e=>"cancelled"===e.status).length,y=g>0?j/g:0,w=u.slice(0,5),k=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,t.jsx)(i.A,{redirectTo:"/dashboard",children:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(n.A,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Dashboard"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:["Welcome back, ",null==s?void 0:s.name,"!"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"orders",name:"Order Analytics",icon:"\uD83D\uDCCA"},{id:"profile",name:"Profile",icon:"\uD83D\uDC64"}].map(e=>(0,t.jsxs)("button",{onClick:()=>a(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat(r===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id))})}),(0,t.jsxs)("div",{className:"p-6",children:["orders"===r&&(0,t.jsx)("div",{className:"space-y-6",children:h?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-500",children:"Loading your order analytics..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Statistics"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-blue-100",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Total Orders"}),(0,t.jsx)("p",{className:"text-xl font-bold text-blue-900",children:g})]})]})}),(0,t.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-green-100",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Total Spent"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-green-900",children:["$",j.toFixed(2)]})]})]})}),(0,t.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-purple-100",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Average Order"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-purple-900",children:["$",y.toFixed(2)]})]})]})}),(0,t.jsx)("div",{className:"bg-orange-50 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-orange-100",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-orange-600",children:"Delivered"}),(0,t.jsx)("p",{className:"text-xl font-bold text-orange-900",children:f})]})]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Status Breakdown"}),(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-yellow-400 rounded-full mr-3"}),(0,t.jsx)("span",{className:"text-gray-700",children:"Pending"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:"".concat(g>0?p/g*100:0,"%")}})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8",children:p})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full mr-3"}),(0,t.jsx)("span",{className:"text-gray-700",children:"Processing"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:"".concat(g>0?b/g*100:0,"%")}})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8",children:b})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-purple-400 rounded-full mr-3"}),(0,t.jsx)("span",{className:"text-gray-700",children:"Shipped"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-purple-400 h-2 rounded-full",style:{width:"".concat(g>0?N/g*100:0,"%")}})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8",children:N})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-3"}),(0,t.jsx)("span",{className:"text-gray-700",children:"Delivered"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-green-400 h-2 rounded-full",style:{width:"".concat(g>0?f/g*100:0,"%")}})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8",children:f})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-400 rounded-full mr-3"}),(0,t.jsx)("span",{className:"text-gray-700",children:"Cancelled"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-red-400 h-2 rounded-full",style:{width:"".concat(g>0?v/g*100:0,"%")}})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8",children:v})]})]})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Orders"}),u.length>0?(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-200",children:[w.map(e=>(0,t.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:["#",e.orderNumber]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(e.createdAt).toLocaleDateString()," â€¢ ",e.items.length," item(s)"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:["$",e.pricing.total.toFixed(2)]}),(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(k(e.status)),children:e.status})]})]})},e._id)),u.length>5&&(0,t.jsx)("div",{className:"p-4 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",w.length," of ",g," orders"]})})]}):(0,t.jsxs)("div",{className:"text-center py-12 bg-white border border-gray-200 rounded-lg",children:[(0,t.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"No orders yet"}),(0,t.jsx)("p",{className:"text-gray-500 mt-2",children:"Start shopping to see your order analytics"}),(0,t.jsx)(d(),{href:"/products",className:"mt-4 inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Products"})]})]})]})}),"profile"===r&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg",children:null==s||null==(e=s.name)?void 0:e.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-2xl font-bold text-gray-900",children:null==s?void 0:s.name}),(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:null==s?void 0:s.email}),(0,t.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full mt-2 bg-green-100 text-green-800",children:"Customer Account"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,t.jsxs)("h5",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Personal Details"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,t.jsx)("p",{className:"text-gray-900 bg-gray-50 px-3 py-2 rounded-md",children:null==s?void 0:s.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,t.jsx)("p",{className:"text-gray-900 bg-gray-50 px-3 py-2 rounded-md",children:null==s?void 0:s.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Type"}),(0,t.jsx)("p",{className:"text-gray-900 bg-gray-50 px-3 py-2 rounded-md capitalize",children:null==s?void 0:s.role})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Member Since"}),(0,t.jsx)("p",{className:"text-gray-900 bg-gray-50 px-3 py-2 rounded-md",children:(null==s?void 0:s.createdAt)?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,t.jsxs)("h5",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Order Summary"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-md",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Total Orders"}),(0,t.jsx)("span",{className:"text-lg font-bold text-blue-900",children:g})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-md",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Total Spent"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-green-900",children:["$",j.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-yellow-50 rounded-md",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-yellow-700",children:"Pending Orders"}),(0,t.jsx)("span",{className:"text-lg font-bold text-yellow-900",children:p})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-md",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Completed Orders"}),(0,t.jsx)("span",{className:"text-lg font-bold text-purple-900",children:f})]})]})]})]})]})]})]})]})]})})}},4542:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var t=r(5155),l=r(2115),a=r(5695),d=r(5159),n=r(3568);function i(e){let{children:s,redirectTo:r="/products",showMessage:i=!0}=e,{isAuthenticated:c,isAdmin:o,isLoading:x}=(0,d.As)(),m=(0,a.useRouter)();return((0,l.useEffect)(()=>{if(!x){if(!c){i&&n.oR.error("Please login to access this page"),m.push("/auth/login");return}if(o){i&&n.oR.error("This feature is not available for admin users"),m.push(r);return}}},[c,o,x,m,r,i]),x)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):!c||o?null:(0,t.jsx)(t.Fragment,{children:s})}},7473:(e,s,r)=>{"use strict";r.d(s,{c:()=>l});var t=r(5558);let l={createOrder:async e=>(await t.Ay.post("/orders",e)).data,getMyOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,t]=e;null!=t&&s.append(r,t.toString())}),(await t.Ay.get("/orders?".concat(s.toString()))).data},getOrder:async e=>(await t.Ay.get("/orders/".concat(e))).data,cancelOrder:async(e,s)=>(await t.Ay.put("/orders/".concat(e,"/cancel"),s)).data,getAllOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,t]=e;null!=t&&s.append(r,t.toString())}),(await t.Ay.get("/orders/admin/all?".concat(s.toString()))).data},updateOrderStatus:async(e,s)=>(await t.Ay.put("/orders/".concat(e,"/status"),s)).data,getUserOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.getMyOrders(e)}}}},e=>{var s=s=>e(e.s=s);e.O(0,[375,112,960,615,441,684,358],()=>s(1076)),_N_E=e.O()}]);