(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{2242:(e,t,s)=>{Promise.resolve().then(s.bind(s,9301))},4542:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(5155),a=s(2115),i=s(5695),l=s(5159),n=s(3568);function d(e){let{children:t,redirectTo:s="/products",showMessage:d=!0}=e,{isAuthenticated:c,isAdmin:o,isLoading:m}=(0,l.As)(),u=(0,i.useRouter)();return((0,a.useEffect)(()=>{if(!m){if(!c){d&&n.oR.error("Please login to access this page"),u.push("/auth/login");return}if(o){d&&n.oR.error("This feature is not available for admin users"),u.push(s);return}}},[c,o,m,u,s,d]),m)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):!c||o?null:(0,r.jsx)(r.Fragment,{children:t})}},7473:(e,t,s)=>{"use strict";s.d(t,{c:()=>a});var r=s(5558);let a={createOrder:async e=>(await r.Ay.post("/orders",e)).data,getMyOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&t.append(s,r.toString())}),(await r.Ay.get("/orders?".concat(t.toString()))).data},getOrder:async e=>(await r.Ay.get("/orders/".concat(e))).data,cancelOrder:async(e,t)=>(await r.Ay.put("/orders/".concat(e,"/cancel"),t)).data,getAllOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&t.append(s,r.toString())}),(await r.Ay.get("/orders/admin/all?".concat(t.toString()))).data},updateOrderStatus:async(e,t)=>(await r.Ay.put("/orders/".concat(e,"/status"),t)).data,getUserOrders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.getMyOrders(e)}}},9053:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(5155),a=s(2115),i=s(5695),l=s(5159);function n(e){let{children:t,requireAuth:s=!0,requireAdmin:n=!1,redirectTo:d="/auth/login"}=e,{isAuthenticated:c,isAdmin:o}=(0,l.As)(),m=(0,i.useRouter)();return((0,a.useEffect)(()=>s&&!c?void m.push(d):n&&!o?void m.push("/"):void 0,[c,o,s,n,m,d]),s&&!c)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):n&&!o?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You dont have permission to access this page."})]})}):(0,r.jsx)(r.Fragment,{children:t})}},9135:(e,t,s)=>{"use strict";s.d(t,{Nc:()=>l});var r=s(5453),a=s(6786);let i=(0,r.v)()((0,a.Zr)((e,t)=>({cart:null,isLoading:!1,error:null,setCart:t=>{e({cart:t,error:null})},addItem:s=>{let r,a=t().cart;if(!a)return void e({cart:{items:[s],totalItems:s.quantity,totalAmount:s.price*s.quantity,lastModified:new Date().toISOString()}});let i=a.items.findIndex(e=>e.product._id===s.product._id);i>-1?(r=[...a.items])[i]={...r[i],quantity:r[i].quantity+s.quantity,price:s.price}:r=[...a.items,s];let l={...a,items:r,lastModified:new Date().toISOString()};l.totalItems=r.reduce((e,t)=>e+t.quantity,0),l.totalAmount=r.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:l})},updateItemQuantity:(s,r)=>{let a,i=t().cart;if(!i)return;a=r<=0?i.items.filter(e=>e.product._id!==s):i.items.map(e=>e.product._id===s?{...e,quantity:r}:e);let l={...i,items:a,lastModified:new Date().toISOString()};l.totalItems=a.reduce((e,t)=>e+t.quantity,0),l.totalAmount=a.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:l})},removeItem:s=>{let r=t().cart;if(!r)return;let a=r.items.filter(e=>e.product._id!==s),i={...r,items:a,lastModified:new Date().toISOString()};i.totalItems=a.reduce((e,t)=>e+t.quantity,0),i.totalAmount=a.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:i})},clearCart:()=>{e({cart:{items:[],totalItems:0,totalAmount:0,lastModified:new Date().toISOString()}})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},clearError:()=>{e({error:null})},calculateTotals:()=>{let s=t().cart;if(!s)return;let r=s.items.reduce((e,t)=>e+t.quantity,0),a=s.items.reduce((e,t)=>e+t.price*t.quantity,0);e({cart:{...s,totalItems:r,totalAmount:a,lastModified:new Date().toISOString()}})}}),{name:"cart-storage",partialize:e=>({cart:e.cart})})),l=()=>{let e=i();return{setCart:e.setCart,addItem:e.addItem,updateItemQuantity:e.updateItemQuantity,removeItem:e.removeItem,clearCart:e.clearCart,setLoading:e.setLoading,setError:e.setError,clearError:e.clearError,calculateTotals:e.calculateTotals}}},9301:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(5155),a=s(5695),i=s(9694),l=s(7129),n=s(4615),d=s(4542),c=s(6334),o=s(6715),m=s(5041),u=s(7473),x=s(9135),h=s(3568),p=s(9053);let y=l.Ik().shape({fullName:l.Yj().min(2,"Full name must be at least 2 characters").max(100,"Full name must be less than 100 characters").required("Full name is required"),street:l.Yj().min(5,"Street address must be at least 5 characters").max(200,"Street address must be less than 200 characters").required("Street address is required"),city:l.Yj().min(2,"City must be at least 2 characters").max(50,"City must be less than 50 characters").required("City is required"),state:l.Yj().min(2,"State must be at least 2 characters").max(50,"State must be less than 50 characters").required("State is required"),zipCode:l.Yj().min(5,"ZIP code must be at least 5 characters").max(10,"ZIP code must be less than 10 characters").required("ZIP code is required"),country:l.Yj().min(2,"Country must be at least 2 characters").max(50,"Country must be less than 50 characters").required("Country is required"),phone:l.Yj().matches(/^[\+]?[1-9][\d]{0,15}$/,"Invalid phone number").optional(),paymentMethod:l.Yj().oneOf(["cash_on_delivery","credit_card","debit_card","paypal"]).required("Payment method is required")});function g(){let e=(0,a.useRouter)(),t=(0,o.jE)(),{data:s,isLoading:l}=(0,c._)(),{clearCart:g}=(0,x.Nc)(),b=null==s?void 0:s.data,f=(0,m.n)({mutationFn:u.c.createOrder,onSuccess:s=>{g(),t.invalidateQueries({queryKey:["cart"]}),t.invalidateQueries({queryKey:["orders"]}),h.oR.success("Order placed successfully!"),e.push("/orders/".concat(s.data._id))},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to place order";h.oR.error(r)}});if(l)return(0,r.jsx)(p.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/4 mb-8"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{className:"space-y-4",children:[...Array(8)].map((e,t)=>(0,r.jsx)("div",{className:"h-12 bg-gray-300 rounded"},t))}),(0,r.jsx)("div",{className:"h-64 bg-gray-300 rounded"})]})]})})]})});if(!b||0===b.items.length)return(0,r.jsx)(d.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Add some items to your cart before checkout"}),(0,r.jsx)("button",{onClick:()=>e.push("/products"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]})})]})});let j=b.totalAmount,N=j>50?0:10,v=j+N+0;return(0,r.jsx)(d.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.A,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),(0,r.jsx)(i.l1,{initialValues:{fullName:"",street:"",city:"",state:"",zipCode:"",country:"USA",phone:"",paymentMethod:"cash_on_delivery"},validationSchema:y,onSubmit:(e,t)=>{let{setSubmitting:s}=t,r={shippingAddress:{fullName:e.fullName,street:e.street,city:e.city,state:e.state,zipCode:e.zipCode,country:e.country,phone:e.phone||void 0},paymentMethod:e.paymentMethod};f.mutate(r,{onSettled:()=>s(!1)})},children:e=>{let{isSubmitting:t}=e;return(0,r.jsx)(i.lV,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Shipping Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,r.jsx)(i.D0,{id:"fullName",name:"fullName",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"fullName",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),(0,r.jsx)(i.D0,{id:"street",name:"street",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"street",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,r.jsx)(i.D0,{id:"city",name:"city",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"city",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,r.jsx)(i.D0,{id:"state",name:"state",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"state",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),(0,r.jsx)(i.D0,{id:"zipCode",name:"zipCode",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"zipCode",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),(0,r.jsx)(i.D0,{id:"country",name:"country",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"country",component:"div",className:"mt-1 text-sm text-red-600"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,r.jsx)(i.D0,{id:"phone",name:"phone",type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(i.Kw,{name:"phone",component:"div",className:"mt-1 text-sm text-red-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),(0,r.jsxs)(i.D0,{as:"select",id:"paymentMethod",name:"paymentMethod",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"cash_on_delivery",children:"Cash on Delivery"}),(0,r.jsx)("option",{value:"credit_card",children:"Credit Card"}),(0,r.jsx)("option",{value:"debit_card",children:"Debit Card"}),(0,r.jsx)("option",{value:"paypal",children:"PayPal"})]}),(0,r.jsx)(i.Kw,{name:"paymentMethod",component:"div",className:"mt-1 text-sm text-red-600"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 h-fit",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Order Summary"}),(0,r.jsx)("div",{className:"space-y-4 mb-6",children:b.items.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 rounded"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.product.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity]})]}),(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.product._id))}),(0,r.jsxs)("div",{className:"space-y-3 border-t border-gray-200 pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,r.jsxs)("span",{className:"font-medium",children:["$",j.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,r.jsx)("span",{className:"font-medium",children:0===N?"Free":"$".concat(N.toFixed(2))})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tax"}),(0,r.jsxs)("span",{className:"font-medium",children:["$","0.00"]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-lg font-semibold",children:"Total"}),(0,r.jsxs)("span",{className:"text-lg font-semibold",children:["$",v.toFixed(2)]})]})})]}),(0,r.jsx)("button",{type:"submit",disabled:t||f.isPending,className:"w-full mt-6 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t||f.isPending?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Placing Order..."]}):"Place Order"})]})]})})}})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[375,112,960,508,615,441,684,358],()=>t(2242)),_N_E=e.O()}]);