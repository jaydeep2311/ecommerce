(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{912:(e,t,s)=>{Promise.resolve().then(s.bind(s,2843))},2250:(e,t,s)=>{"use strict";s.d(t,{AP:()=>n,IM:()=>c,lj:()=>u,uM:()=>o});var r=s(6715),a=s(5041),l=s(9950),i=s(9135),d=s(3568);let n=()=>{let e=(0,r.jE)(),{setCart:t}=(0,i.Nc)();return(0,a.n)({mutationFn:l.z.addToCart,onSuccess:s=>{t(s.data),e.setQueryData(["cart"],s),d.oR.success("Item added to cart!")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to add item to cart";d.oR.error(r)}})},o=()=>{let e=(0,r.jE)(),{setCart:t}=(0,i.Nc)();return(0,a.n)({mutationFn:e=>{let{productId:t,quantity:s}=e;return l.z.updateCartItem(t,{quantity:s})},onSuccess:s=>{t(s.data),e.setQueryData(["cart"],s),d.oR.success("Cart updated!")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to update cart";d.oR.error(r)}})},c=()=>{let e=(0,r.jE)(),{setCart:t}=(0,i.Nc)();return(0,a.n)({mutationFn:l.z.removeFromCart,onSuccess:s=>{t(s.data),e.setQueryData(["cart"],s),d.oR.success("Item removed from cart!")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to remove item";d.oR.error(r)}})},u=()=>{let e=(0,r.jE)(),{clearCart:t}=(0,i.Nc)();return(0,a.n)({mutationFn:l.z.clearCart,onSuccess:s=>{t(),e.setQueryData(["cart"],s),d.oR.success("Cart cleared!")},onError:e=>{var t,s;let r=(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to clear cart";d.oR.error(r)}})}},2843:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(6766),l=s(6874),i=s.n(l),d=s(5695),n=s(4615),o=s(4542),c=s(6334),u=s(2250);function m(){let e=(0,d.useRouter)(),{data:t,isLoading:s}=(0,c._)(),l=(0,u.uM)(),m=(0,u.IM)(),x=(0,u.lj)(),h=null==t?void 0:t.data,p=(e,t)=>{t<1||l.mutate({productId:e,quantity:t})},g=e=>{m.mutate(e)};return s?(0,r.jsx)(o.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/4 mb-8"}),(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"bg-white rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"h-20 w-20 bg-gray-300 rounded"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/4"})]})]})},t))})]})})]})}):(0,r.jsx)(o.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.A,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Shopping Cart"}),h&&h.items.length>0&&(0,r.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to clear your cart?")&&x.mutate()},className:"text-red-600 hover:text-red-800 font-medium",children:"Clear Cart"})]}),h&&0!==h.items.length?(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold",children:["Cart Items (",h.totalItems,")"]})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:h.items.map(e=>(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"relative h-20 w-20",children:e.product.images[0]?(0,r.jsx)(a.default,{src:e.product.images[0].url,alt:e.product.name,fill:!0,className:"object-cover rounded-lg"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"No Image"})})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)(i(),{href:"/products/".concat(e.product._id),className:"text-lg font-medium text-gray-900 hover:text-blue-600 transition-colors",children:e.product.name}),(0,r.jsxs)("p",{className:"text-gray-600",children:["$",e.price.toFixed(2)," each"]}),e.quantity>e.product.stock&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1",children:["Only ",e.product.stock," available in stock"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>p(e.product._id,e.quantity-1),disabled:e.quantity<=1,className:"p-1 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,r.jsx)("span",{className:"w-12 text-center font-medium",children:e.quantity}),(0,r.jsx)("button",{onClick:()=>p(e.product._id,e.quantity+1),disabled:e.quantity>=e.product.stock,className:"p-1 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]}),(0,r.jsx)("button",{onClick:()=>g(e.product._id),className:"text-red-600 hover:text-red-800 text-sm mt-1",children:"Remove"})]})]})},e.product._id))})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-24",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Subtotal (",h.totalItems," items)"]}),(0,r.jsxs)("span",{className:"font-medium",children:["$",h.totalAmount.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,r.jsx)("span",{className:"font-medium",children:h.totalAmount>50?"Free":"$10.00"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tax"}),(0,r.jsx)("span",{className:"font-medium",children:"$0.00"})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-lg font-semibold",children:"Total"}),(0,r.jsxs)("span",{className:"text-lg font-semibold",children:["$",(h.totalAmount+(h.totalAmount>50?0:10)).toFixed(2)]})]})})]}),h.totalAmount<50&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6",children:(0,r.jsxs)("p",{className:"text-blue-800 text-sm",children:["Add $",(50-h.totalAmount).toFixed(2)," more for free shipping!"]})}),(0,r.jsx)("button",{onClick:()=>{e.push("/checkout")},className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Proceed to Checkout"}),(0,r.jsx)(i(),{href:"/products",className:"block w-full text-center text-blue-600 py-3 px-4 border border-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors mt-3",children:"Continue Shopping"})]})})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9m-9 0h9"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Start shopping to add items to your cart"}),(0,r.jsx)(i(),{href:"/products",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]})]})]})})}},4542:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(5155),a=s(2115),l=s(5695),i=s(5159),d=s(3568);function n(e){let{children:t,redirectTo:s="/products",showMessage:n=!0}=e,{isAuthenticated:o,isAdmin:c,isLoading:u}=(0,i.As)(),m=(0,l.useRouter)();return((0,a.useEffect)(()=>{if(!u){if(!o){n&&d.oR.error("Please login to access this page"),m.push("/auth/login");return}if(c){n&&d.oR.error("This feature is not available for admin users"),m.push(s);return}}},[o,c,u,m,s,n]),u)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):!o||c?null:(0,r.jsx)(r.Fragment,{children:t})}},9135:(e,t,s)=>{"use strict";s.d(t,{Nc:()=>i});var r=s(5453),a=s(6786);let l=(0,r.v)()((0,a.Zr)((e,t)=>({cart:null,isLoading:!1,error:null,setCart:t=>{e({cart:t,error:null})},addItem:s=>{let r,a=t().cart;if(!a)return void e({cart:{items:[s],totalItems:s.quantity,totalAmount:s.price*s.quantity,lastModified:new Date().toISOString()}});let l=a.items.findIndex(e=>e.product._id===s.product._id);l>-1?(r=[...a.items])[l]={...r[l],quantity:r[l].quantity+s.quantity,price:s.price}:r=[...a.items,s];let i={...a,items:r,lastModified:new Date().toISOString()};i.totalItems=r.reduce((e,t)=>e+t.quantity,0),i.totalAmount=r.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:i})},updateItemQuantity:(s,r)=>{let a,l=t().cart;if(!l)return;a=r<=0?l.items.filter(e=>e.product._id!==s):l.items.map(e=>e.product._id===s?{...e,quantity:r}:e);let i={...l,items:a,lastModified:new Date().toISOString()};i.totalItems=a.reduce((e,t)=>e+t.quantity,0),i.totalAmount=a.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:i})},removeItem:s=>{let r=t().cart;if(!r)return;let a=r.items.filter(e=>e.product._id!==s),l={...r,items:a,lastModified:new Date().toISOString()};l.totalItems=a.reduce((e,t)=>e+t.quantity,0),l.totalAmount=a.reduce((e,t)=>e+t.price*t.quantity,0),e({cart:l})},clearCart:()=>{e({cart:{items:[],totalItems:0,totalAmount:0,lastModified:new Date().toISOString()}})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},clearError:()=>{e({error:null})},calculateTotals:()=>{let s=t().cart;if(!s)return;let r=s.items.reduce((e,t)=>e+t.quantity,0),a=s.items.reduce((e,t)=>e+t.price*t.quantity,0);e({cart:{...s,totalItems:r,totalAmount:a,lastModified:new Date().toISOString()}})}}),{name:"cart-storage",partialize:e=>({cart:e.cart})})),i=()=>{let e=l();return{setCart:e.setCart,addItem:e.addItem,updateItemQuantity:e.updateItemQuantity,removeItem:e.removeItem,clearCart:e.clearCart,setLoading:e.setLoading,setError:e.setError,clearError:e.clearError,calculateTotals:e.calculateTotals}}}},e=>{var t=t=>e(e.s=t);e.O(0,[375,112,960,766,615,441,684,358],()=>t(912)),_N_E=e.O()}]);